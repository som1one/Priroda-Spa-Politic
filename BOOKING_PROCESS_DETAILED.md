# üìã –ü—Ä–æ—Ü–µ—Å—Å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç –ê –¥–æ –Ø

## üéØ –ü–æ–ª–Ω—ã–π —Ñ–ª–æ—É –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —É—Å–ª—É–≥–∏

---

## 1Ô∏è‚É£ **–í–´–ë–û–† –£–°–õ–£–ì–ò** (MenuSpaScreen)

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–µ–Ω—é SPA
2. –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –¥–µ—Ä–µ–≤–æ –º–µ–Ω—é: `GET /api/v1/menu/tree`
3. –û—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ —É—Å–ª—É–≥–∏
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç —É—Å–ª—É–≥—É

### –î–∞–Ω–Ω—ã–µ:
- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —É—Å–ª—É–≥
- –£—Å–ª—É–≥–∏ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º, —Ü–µ–Ω–æ–π, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏

---

## 2Ô∏è‚É£ **–î–ï–¢–ê–õ–ò –£–°–õ–£–ì–ò** (ServiceDetailScreen)

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:
1. –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —É—Å–ª—É–≥–µ: `GET /api/v1/services/{serviceId}`
2. –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è:
   - –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É—Å–ª—É–≥–∏
   - –ù–∞–∑–≤–∞–Ω–∏–µ –∏ –ø–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫
   - –û–ø–∏—Å–∞–Ω–∏–µ
   - –¶–µ–Ω–∞ –∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
   - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏
   - Highlights (—Ç–µ–≥–∏)
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç **"–ë—ã—Å—Ç—Ä–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ"**

### –í–∞–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞:
```dart
// –í—Å–µ —É—Å–ª—É–≥–∏ –±—Ä–æ–Ω–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ YClients
Navigator.pushNamed(RouteNames.yclientsBooking);
```

### –ï–¥–∏–Ω—ã–π –ø—É—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è: YClients ‚úÖ

**–í–°–Å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–Ω—É—Ç—Ä–∏ –≤–∏–¥–∂–µ—Ç–∞ YClients!**

1. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è `YClientsBookingScreen`
2. –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤–∏–¥–∂–µ—Ç URL: `GET /api/v1/yclients/widget-url/{serviceId}`
3. –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è WebView —Å –≤–∏–¥–∂–µ—Ç–æ–º YClients
4. **–í–Ω—É—Ç—Ä–∏ –≤–∏–¥–∂–µ—Ç–∞ YClients:**
   - ‚úÖ –í—ã–±–æ—Ä –¥–∞—Ç—ã (–∫–∞–ª–µ–Ω–¥–∞—Ä—å YClients)
   - ‚úÖ –í—ã–±–æ—Ä –≤—Ä–µ–º–µ–Ω–∏ (—Ä–µ–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ)
   - ‚úÖ –í—ã–±–æ—Ä –º–∞—Å—Ç–µ—Ä–∞ (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)
   - ‚úÖ –í—ã–±–æ—Ä —É—Å–ª—É–≥–∏ (–µ—Å–ª–∏ —É—Å–ª—É–≥–∞ –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω–∞ –∫ YClients)
   - ‚úÖ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏ —Å —Ü–µ–Ω–∞–º–∏
   - ‚úÖ –û–ø–ª–∞—Ç–∞ (—á–µ—Ä–µ–∑ YClients)
   - ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ (–≤ YClients)
5. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤ –≤–∏–¥–∂–µ—Ç–µ ‚Üí –≤–æ–∑–≤—Ä–∞—Ç –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

**–ù–∞—à –ø—Ä–æ—Ü–µ—Å—Å (BookingScreen ‚Üí BookingDetailsScreen ‚Üí PayScreen) –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è!**

### –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ URL –≤–∏–¥–∂–µ—Ç–∞:

#### –ï—Å–ª–∏ —É—Å–ª—É–≥–∞ –ø—Ä–∏–≤—è–∑–∞–Ω–∞ –∫ YClients (`yclients_service_id` –µ—Å—Ç—å):
```
https://yclients.com/timetable/{company_id}?services={yclients_service_id}
```
‚Üí –í–∏–¥–∂–µ—Ç —Å—Ä–∞–∑—É –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω—É–∂–Ω—É—é —É—Å–ª—É–≥—É

#### –ï—Å–ª–∏ —É—Å–ª—É–≥–∞ –ù–ï –ø—Ä–∏–≤—è–∑–∞–Ω–∞ –∫ YClients:
```
https://yclients.com/timetable/{company_id}
```
‚Üí –í–∏–¥–∂–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ —É—Å–ª—É–≥–∏ YClients

---

## ‚ö†Ô∏è –£–°–¢–ê–†–ï–í–®–ò–ï –†–ê–ó–î–ï–õ–´ (–±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è)

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –†–∞–∑–¥–µ–ª—ã 3-7 –æ–ø–∏—Å—ã–≤–∞—é—Ç –Ω–∞—à –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø—Ä–æ—Ü–µ—Å—Å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π **–±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**. –í—Å–µ —É—Å–ª—É–≥–∏ —Ç–µ–ø–µ—Ä—å –±—Ä–æ–Ω–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ YClients –≤–∏–¥–∂–µ—Ç (—Å–º. —Ä–∞–∑–¥–µ–ª –≤—ã—à–µ).

---

## 3Ô∏è‚É£ **–®–ê–ì 1: –í–´–ë–û–† –î–ê–¢–´ –ò –í–†–ï–ú–ï–ù–ò** (BookingScreen) ‚ö†Ô∏è –£–°–¢–ê–†–ï–õ–û

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:
1. –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —É—Å–ª—É–≥–∞ (–µ—Å–ª–∏ –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω–∞)
2. –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: `GET /api/v1/auth/me`
3. –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–ª–µ–Ω–¥–∞—Ä—å –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–ª–æ—Ç—ã

### –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä:
```
[1 –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è] ‚Üí 2 –î–µ—Ç–∞–ª–∏ ‚Üí 3 –û–ø–ª–∞—Ç–∞ ‚Üí 4 –ü–æ–¥—Ç–≤
```

### –ö–∞–ª–µ–Ω–¥–∞—Ä—å:
- **–ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –º–µ—Å—è—Ü–∞–º** (—Å—Ç—Ä–µ–ª–∫–∏ –≤–ª–µ–≤–æ/–≤–ø—Ä–∞–≤–æ)
- **–í—ã–±–æ—Ä –¥–∞—Ç—ã**: –∫–ª–∏–∫ –ø–æ –¥–Ω—é
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**:
  - ‚ùå –ü—Ä–æ—à–µ–¥—à–∏–µ –¥–∞—Ç—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã (—Å–µ—Ä—ã–º)
  - ‚úÖ –î–æ—Å—Ç—É–ø–Ω—ã –¥–∞—Ç—ã –Ω–∞ **90 –¥–Ω–µ–π –≤–ø–µ—Ä—ë–¥**
  - ‚úÖ –í—ã–±—Ä–∞–Ω–Ω–∞—è –¥–∞—Ç–∞ –≤—ã–¥–µ–ª—è–µ—Ç—Å—è –∑–µ–ª—ë–Ω—ã–º –∫—Ä—É–≥–æ–º

### –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–ª–æ—Ç—ã:
- **–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫**: 09:00, 10:00, 11:00, 12:00, 13:00, 14:00, 15:00, 16:00, 17:00, 18:00, 19:00, 20:00
- **–í—ã–±—Ä–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è**: –∑–µ–ª—ë–Ω—ã–π —Ñ–æ–Ω, –±–µ–ª—ã–π —Ç–µ–∫—Å—Ç
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–ª—è —Å–µ–≥–æ–¥–Ω—è**:
  - –ü—Ä–æ—à–µ–¥—à–∏–µ –≤—Ä–µ–º–µ–Ω–∞ —Å–∫—Ä—ã—Ç—ã
  - –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è: **—Ç–µ–∫—É—â–µ–µ + 1 —á–∞—Å**

### –ö–Ω–æ–ø–∫–∞ "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ":
- –ê–∫—Ç–∏–≤–Ω–∞ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –≤—ã–±–æ—Ä–µ **–¥–∞—Ç—ã –ò –≤—Ä–µ–º–µ–Ω–∏**
- –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏: –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥

### –ü–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ:
```dart
{
  'serviceId': service.id,
  'service': service,
  'appointmentDateTime': DateTime(year, month, day, hour, minute)
}
```

---

## 4Ô∏è‚É£ **–®–ê–ì 2: –î–ï–¢–ê–õ–ò –ë–†–û–ù–ò–†–û–í–ê–ù–ò–Ø** (BookingDetailsScreen) ‚ö†Ô∏è –£–°–¢–ê–†–ï–õ–û

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:
1. –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —É—Å–ª—É–≥–∞ (–µ—Å–ª–∏ –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω–∞)
2. –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è

### –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä:
```
1 ‚úì ‚Üí [2 –î–µ—Ç–∞–ª–∏] ‚Üí 3 –û–ø–ª–∞—Ç–∞ ‚Üí 4 –ü–æ–¥—Ç–≤
```

### –û—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ:

#### **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–ø–∏—Å–∏:**
- –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è (–∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —à–∞–≥–∞)
- –ò–∫–æ–Ω–∫–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—è

#### **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏** (–µ—Å–ª–∏ –µ—Å—Ç—å):
- –ß–µ–∫–±–æ–∫—Å—ã –¥–ª—è –≤—ã–±–æ—Ä–∞
- –ò–∫–æ–Ω–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤:
  - –ö–∞–º–Ω–∏ ‚Üí `wb_twilight`
  - –†–µ—Ñ–ª–µ–∫—Å/—Å—Ç–æ–ø—ã ‚Üí `directions_walk`
  - –ì–æ–ª–æ–≤–∞ ‚Üí `self_improvement`
  - –û—Å—Ç–∞–ª—å–Ω—ã–µ ‚Üí `spa`
- –í—ã–±—Ä–∞–Ω–Ω—ã–µ —É—Å–ª—É–≥–∏: –∑–µ–ª—ë–Ω–∞—è —Ä–∞–º–∫–∞

#### **–ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- **–¢–µ–ª–µ—Ñ–æ–Ω**:
  - –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è
  - –í–∞–ª–∏–¥–∞—Ü–∏—è: –º–∏–Ω–∏–º—É–º 10 —Ü–∏—Ñ—Ä
  - –§–æ—Ä–º–∞—Ç: —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã

#### **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π** (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):
- –¢–µ–∫—Å—Ç–æ–≤–æ–µ –ø–æ–ª–µ –¥–ª—è –ø–æ–∂–µ–ª–∞–Ω–∏–π
- –ú–∞–∫—Å–∏–º—É–º 3 —Å—Ç—Ä–æ–∫–∏

#### **–ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å:**
- –ë–∞–∑–æ–≤–∞—è —Ü–µ–Ω–∞ —É—Å–ª—É–≥–∏
- ‚ö†Ô∏è **TODO**: –î–æ–±–∞–≤–∏—Ç—å —Ü–µ–Ω—ã –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —É—Å–ª—É–≥

### –ö–Ω–æ–ø–∫–∞ "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∫ –æ–ø–ª–∞—Ç–µ":
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã (—Ç–µ–ª–µ—Ñ–æ–Ω –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω)
- –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏: –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —ç–∫—Ä–∞–Ω –æ–ø–ª–∞—Ç—ã

### –ü–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ:
```dart
{
  'serviceId': service.id,
  'serviceName': service.name,
  'servicePrice': totalPrice,
  'appointmentDateTime': DateTime,
  'duration': service.duration,
  'phone': phone,
  'notes': notes,
  'additionalServices': List<String>
}
```

---

## 5Ô∏è‚É£ **–®–ê–ì 3: –û–ü–õ–ê–¢–ê** (PayScreen) ‚ö†Ô∏è –£–°–¢–ê–†–ï–õ–û

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:
1. –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏: `GET /api/v1/loyalty/info`
2. –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ñ–æ—Ä–º–∞ –æ–ø–ª–∞—Ç—ã

### –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä:
```
1 ‚úì ‚Üí 2 ‚úì ‚Üí [3 –û–ø–ª–∞—Ç–∞] ‚Üí 4 –ü–æ–¥—Ç–≤
```

### –§–æ—Ä–º–∞ –æ–ø–ª–∞—Ç—ã:

#### **–î–µ—Ç–∞–ª–∏ –∫–∞—Ä—Ç—ã:**

1. **–ù–æ–º–µ—Ä –∫–∞—Ä—Ç—ã**:
   - –ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä: `0000 0000 0000 0000`
   - –ò–∫–æ–Ω–∫–∞: `credit_card`
   - –ê–≤—Ç–æ—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: 4 —Ü–∏—Ñ—Ä—ã + –ø—Ä–æ–±–µ–ª
   - –í–∞–ª–∏–¥–∞—Ü–∏—è: **13-19 —Ü–∏—Ñ—Ä**

2. **–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è**:
   - –ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä: `–ú–ú/–ì–ì`
   - –ò–∫–æ–Ω–∫–∞: `calendar_today`
   - –ê–≤—Ç–æ—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: –ú–ú/–ì–ì
   - –í–∞–ª–∏–¥–∞—Ü–∏—è:
     - –ú–µ—Å—è—Ü: **1-12**
     - –ì–æ–¥: **>= —Ç–µ–∫—É—â–∏–π**

3. **CVV**:
   - –ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä: `***`
   - –ò–∫–æ–Ω–∫–∞: `lock_outline`
   - –°–∫—Ä—ã—Ç—ã–π –≤–≤–æ–¥
   - –í–∞–ª–∏–¥–∞—Ü–∏—è: **3-4 —Ü–∏—Ñ—Ä—ã**

4. **–ò–º—è –≤–ª–∞–¥–µ–ª—å—Ü–∞ –∫–∞—Ä—Ç—ã**:
   - –ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä: "–ò–º—è –Ω–∞ –∫–∞—Ä—Ç–µ"
   - –ò–∫–æ–Ω–∫–∞: `person_outline`
   - –í–∞–ª–∏–¥–∞—Ü–∏—è: **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ**

#### **–ú–æ–±–∏–ª—å–Ω–∞—è –æ–ø–ª–∞—Ç–∞:**
- **Apple Pay**: —á—ë—Ä–Ω–∞—è –∫–Ω–æ–ø–∫–∞ (TODO: —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)
- **Google Pay**: –±–µ–ª–∞—è –∫–Ω–æ–ø–∫–∞ (TODO: —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)

#### **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∞–ª–ª—ã –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏:**
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ `currentPoints > 0`
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –±–∞–ª–ª–æ–≤
- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
- –ü—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏: –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ notes "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –±–∞–ª–ª—ã –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏"

### –ö–Ω–æ–ø–∫–∞ "–û–ø–ª–∞—Ç–∏—Ç—å":
1. **–í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –ø–æ–ª–µ–π**
2. **–ò–º–∏—Ç–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–ª–∞—Ç–µ–∂–∞** (1 —Å–µ–∫—É–Ω–¥–∞)
3. **–°–æ–∑–¥–∞–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ**

### –°–æ–∑–¥–∞–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è:

#### **–ó–∞–ø—Ä–æ—Å:**
```http
POST /api/v1/bookings
Authorization: Bearer {token}
Content-Type: application/json

{
  "service_name": "–ú–∞—Å—Å–∞–∂",
  "service_duration": 60,
  "service_price": 500000,  // –≤ –∫–æ–ø–µ–π–∫–∞—Ö (5000 ‚ÇΩ)
  "appointment_datetime": "2024-11-20T14:00:00Z",
  "notes": "–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π\n–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –±–∞–ª–ª—ã –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏\n–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏: –ö–∞–º–Ω–∏, –†–µ—Ñ–ª–µ–∫—Å–æ—Ç–µ—Ä–∞–ø–∏—è",
  "phone": "+79991234567"
}
```

#### **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ backend:**

1. **–í–∞–ª–∏–¥–∞—Ü–∏—è**:
   - –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ `appointment_datetime` –≤ –±—É–¥—É—â–µ–º
   - –ï—Å–ª–∏ –≤ –ø—Ä–æ—à–ª–æ–º ‚Üí –æ—à–∏–±–∫–∞ 400

2. **–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤ –ë–î**:
   - `user_id` –±–µ—Ä—ë—Ç—Å—è –∏–∑ —Ç–æ–∫–µ–Ω–∞ (`current_user.id`)
   - `status` = `"pending"` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
   - `phone` = –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–π —Ç–µ–ª–µ—Ñ–æ–Ω –∏–ª–∏ email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–µ—Å–ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω –Ω–µ —É–∫–∞–∑–∞–Ω)

3. **–û—Ç–ø—Ä–∞–≤–∫–∞ email –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è** (background task):
   - –í—ã–∑—ã–≤–∞–µ—Ç—Å—è `send_booking_confirmation()`
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ (–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç)

4. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**:
   - –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è —Å–æ–∑–¥–∞–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
   - –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ

#### **–û—Ç–≤–µ—Ç:**
```json
{
  "id": 123,
  "user_id": 456,
  "service_name": "–ú–∞—Å—Å–∞–∂",
  "service_duration": 60,
  "service_price": 500000,
  "appointment_datetime": "2024-11-20T14:00:00Z",
  "status": "pending",
  "notes": "...",
  "phone": "+79991234567",
  "cancelled_at": null,
  "cancelled_reason": null,
  "created_at": "2024-11-17T10:00:00Z",
  "updated_at": "2024-11-17T10:00:00Z"
}
```

---

## 6Ô∏è‚É£ **–®–ê–ì 4: –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ò–ï –ë–†–û–ù–ò–†–û–í–ê–ù–ò–Ø** ‚ö†Ô∏è –£–°–¢–ê–†–ï–õ–û

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:
1. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –¥–∏–∞–ª–æ–≥
2. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è email –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è (background task)

### –î–∏–∞–ª–æ–≥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è:
- **–ò–∫–æ–Ω–∫–∞**: ‚úÖ `check_circle` (–∑–µ–ª—ë–Ω–∞—è)
- **–ó–∞–≥–æ–ª–æ–≤–æ–∫**: "–í—ã –∑–∞–ø–∏—Å–∞–Ω—ã!"
- **–°–æ–æ–±—â–µ–Ω–∏–µ**: "–í–∞—à–∞ –∑–∞–ø–∏—Å—å —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –Ω–∞ –≤–∞—à—É –ø–æ—á—Ç—É."
- **–î–µ—Ç–∞–ª–∏ –∑–∞–ø–∏—Å–∏**:
  - –£—Å–ª—É–≥–∞
  - –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è (—Ñ–æ—Ä–º–∞—Ç: `dd.MM.yyyy HH:mm`)
  - –°—Ç–æ–∏–º–æ—Å—Ç—å (–µ—Å–ª–∏ –µ—Å—Ç—å)
- **–ö–Ω–æ–ø–∫–∞ "OK"**

### –ü–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è "OK":
```dart
Navigator.pushNamedAndRemoveUntil(
  RouteNames.home,
  (route) => false,  // –û—á–∏—Å—Ç–∫–∞ —Å—Ç–µ–∫–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
);
```

---

## 7Ô∏è‚É£ **–ì–õ–ê–í–ù–´–ô –≠–ö–†–ê–ù** (HomeScreen) ‚ö†Ô∏è –£–°–¢–ê–†–ï–õ–û

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:
1. –í–æ–∑–≤—Ä–∞—Ç –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω
2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π (–µ—Å–ª–∏ –µ—Å—Ç—å)

---

## üîÑ –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ YClients

### –í—Å–µ —É—Å–ª—É–≥–∏ –±—Ä–æ–Ω–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ YClients:

**–í–°–Å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–Ω—É—Ç—Ä–∏ –≤–∏–¥–∂–µ—Ç–∞ YClients!**

1. **YClientsBookingScreen**:
   - –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤–∏–¥–∂–µ—Ç URL: `GET /api/v1/yclients/widget-url/{serviceId}`
   - –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è WebView —Å –≤–∏–¥–∂–µ—Ç–æ–º YClients
   - **–í–Ω—É—Ç—Ä–∏ –≤–∏–¥–∂–µ—Ç–∞:**
     - ‚úÖ –í—ã–±–æ—Ä –¥–∞—Ç—ã (–∫–∞–ª–µ–Ω–¥–∞—Ä—å YClients)
     - ‚úÖ –í—ã–±–æ—Ä –≤—Ä–µ–º–µ–Ω–∏ (—Ä–µ–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∏–∑ YClients)
     - ‚úÖ –í—ã–±–æ—Ä –º–∞—Å—Ç–µ—Ä–∞ (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –≤ YClients)
     - ‚úÖ –í—ã–±–æ—Ä —É—Å–ª—É–≥–∏ (–µ—Å–ª–∏ —É—Å–ª—É–≥–∞ –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω–∞ –∫ YClients)
     - ‚úÖ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏ —Å —Ü–µ–Ω–∞–º–∏
     - ‚úÖ –û–ø–ª–∞—Ç–∞ (—á–µ—Ä–µ–∑ YClients)
     - ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ (–≤ YClients)
   - –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è ‚Üí –≤–æ–∑–≤—Ä–∞—Ç –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ YClients:
- ‚úÖ –í—ã–±–æ—Ä –º–∞—Å—Ç–µ—Ä–∞
- ‚úÖ –†–µ–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ (–ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏)
- ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ü–µ–Ω—ã
- ‚úÖ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏ —Å —Ü–µ–Ω–∞–º–∏
- ‚úÖ –ü–æ–ª–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –æ–¥–Ω–æ–º –≤–∏–¥–∂–µ—Ç–µ
- ‚úÖ –ï–¥–∏–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –¥–ª—è –≤—Å–µ—Ö —É—Å–ª—É–≥

### –í–∞–∂–Ω–æ:
**–ù–∞—à –ø—Ä–æ—Ü–µ—Å—Å (BookingScreen ‚Üí BookingDetailsScreen ‚Üí PayScreen) –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è!**
**–í—Å–µ —É—Å–ª—É–≥–∏ –±—Ä–æ–Ω–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ YClients –≤–∏–¥–∂–µ—Ç.**

---

## üìä –°—Ö–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö

### Service (–£—Å–ª—É–≥–∞):
```dart
{
  id: int,
  name: string,
  subtitle: string?,
  description: string?,
  price: double?,
  duration: int?,
  imageUrl: string?,
  detailImageUrl: string?,
  additionalServices: List<Map>?,
  highlights: List<String>?,
  contactLink: string?,
  contactLabel: string?,
  bookButtonLabel: string?,
  yclientsServiceId: int?,  // –ï—Å–ª–∏ –µ—Å—Ç—å ‚Üí YClients
  yclientsStaffId: int?
}
```

### Booking (–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ):
```dart
{
  id: int,
  user_id: int,
  service_name: string,
  service_duration: int?,
  service_price: int?,  // –≤ –∫–æ–ø–µ–π–∫–∞—Ö
  appointment_datetime: DateTime,
  status: "pending" | "confirmed" | "completed" | "cancelled",
  notes: string?,
  phone: string?,
  created_at: DateTime,
  updated_at: DateTime
}
```

---

## ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ TODO

### –¢–µ–∫—É—â–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (–¥–ª—è YClients):
1. **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç YClients**: –≤—Å–µ —É—Å–ª—É–≥–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ YClients –∏–ª–∏ –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –Ω–∏–º
2. **–ï—Å–ª–∏ —É—Å–ª—É–≥–∞ –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω–∞**: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–≤–∏–¥–∏—Ç –≤—Å–µ —É—Å–ª—É–≥–∏ YClients (–º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—É–¥–æ–±–Ω–æ)
3. **WebView**: –≤–∏–¥–∂–µ—Ç YClients –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ WebView (–º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω–µ–µ –Ω–∞—Ç–∏–≤–Ω–æ–≥–æ)

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
- ‚úÖ –ü—Ä–∏–≤—è–∑–∞—Ç—å –≤—Å–µ —É—Å–ª—É–≥–∏ –∫ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º —É—Å–ª—É–≥–∞–º –≤ YClients (`yclients_service_id`)
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å YClients –ø—Ä–∞–≤–∏–ª—å–Ω–æ (—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ, –º–∞—Å—Ç–µ—Ä–∞, —Ü–µ–Ω—ã)
- ‚úÖ –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ —É—Å–ª—É–≥–∏ –µ—Å—Ç—å –≤ YClients

### TODO (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∏–¥–∂–µ—Ç–∞ YClients –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ YClients (–µ—Å–ª–∏ –≤–∏–¥–∂–µ—Ç –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª—Å—è)
- [ ] –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–∞–ø–∏—Å–µ–π –∏–∑ YClients –≤ –Ω–∞—à—É –ë–î (–¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏)

---

## üéØ –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ö–µ–º–∞

```
–ú–µ–Ω—é ‚Üí –î–µ—Ç–∞–ª–∏ —É—Å–ª—É–≥–∏ ‚Üí YClientsBookingScreen (WebView) ‚Üí [–í–°–Å –í –í–ò–î–ñ–ï–¢–ï YCLIENTS] ‚Üí –í–æ–∑–≤—Ä–∞—Ç –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```

**–ï–¥–∏–Ω—ã–π –ø—É—Ç—å –¥–ª—è –≤—Å–µ—Ö —É—Å–ª—É–≥:**

### –í—Å–µ —É—Å–ª—É–≥–∏ ‚Üí YClients –≤–∏–¥–∂–µ—Ç
```
–î–µ—Ç–∞–ª–∏ —É—Å–ª—É–≥–∏ ‚Üí YClientsBookingScreen (WebView) ‚Üí [–í–°–Å –í –í–ò–î–ñ–ï–¢–ï YCLIENTS]
                                                      ‚Üì
                                              –î–∞—Ç–∞, –≤—Ä–µ–º—è, –º–∞—Å—Ç–µ—Ä, —É—Å–ª—É–≥–∞, –æ–ø–ª–∞—Ç–∞
                                                      ‚Üì
                                              –ó–∞–ø–∏—Å—å –≤ YClients
                                                      ‚Üì
                                              –í–æ–∑–≤—Ä–∞—Ç –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```

**–ù–∞—à –ø—Ä–æ—Ü–µ—Å—Å (BookingScreen ‚Üí BookingDetailsScreen ‚Üí PayScreen) –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è!**

---

## üìù –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **–í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ**: –¥–∞—Ç–∞, –≤—Ä–µ–º—è, —Ç–µ–ª–µ—Ñ–æ–Ω, –∫–∞—Ä—Ç–∞
2. **–ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä**: –≤–∏–∑—É–∞–ª—å–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —à–∞–≥
3. **–ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ**: —Ç–µ–ª–µ—Ñ–æ–Ω –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è
4. **–õ–æ—è–ª—å–Ω–æ—Å—Ç—å**: –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∞–ª–ª—ã (–µ—Å–ª–∏ –µ—Å—Ç—å)
5. **Email –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ**: –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
6. **–û—á–∏—Å—Ç–∫–∞ —Å—Ç–µ–∫–∞**: –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –≤–æ–∑–≤—Ä–∞—Ç –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω

---

**–í–æ—Ç —Ç–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç –Ω–∞—á–∞–ª–∞ –¥–æ –∫–æ–Ω—Ü–∞!** üéâ

