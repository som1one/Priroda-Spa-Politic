# –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã 401 "–ù–µ —É–∫–∞–∑–∞–Ω –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"

## üî¥ –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ YClients API –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –æ—à–∏–±–∫–∞:
```
401 Unauthorized
{"success":false,"data":null,"meta":{"message":"–ù–µ —É–∫–∞–∑–∞–Ω –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"}}
```

## üîç –ü—Ä–∏—á–∏–Ω—ã

1. **User Token –∏—Å—Ç–µ–∫** - —Ç–æ–∫–µ–Ω—ã YClients –º–æ–≥—É—Ç –∏–º–µ—Ç—å —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è
2. **User Token –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π** - —Ç–æ–∫–µ–Ω —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω —Å –æ—à–∏–±–∫–æ–π
3. **User Token –Ω–µ –∏–º–µ–µ—Ç –Ω—É–∂–Ω—ã—Ö –ø—Ä–∞–≤** - —Ç–æ–∫–µ–Ω –Ω–µ –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –Ω—É–∂–Ω—ã–º –º–µ—Ç–æ–¥–∞–º API

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –®–∞–≥ 1: –û–±–Ω–æ–≤–∏—Ç–µ User Token

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Ç–æ–∫–µ–Ω–∞:

```bash
cd backend
python scripts/refresh_yclients_token.py
```

–°–∫—Ä–∏–ø—Ç:
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç —Ç–µ–∫—É—â–∏–π —Ç–æ–∫–µ–Ω
2. –ï—Å–ª–∏ —Ç–æ–∫–µ–Ω –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –∑–∞–ø—Ä–æ—Å–∏—Ç –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å
3. –ü–æ–ª—É—á–∏—Ç –Ω–æ–≤—ã–π User Token
4. –ü–æ–∫–∞–∂–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –ø–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é –≤ `.env`

### –®–∞–≥ 2: –û–±–Ω–æ–≤–∏—Ç–µ .env —Ñ–∞–π–ª

–û—Ç–∫—Ä–æ–π—Ç–µ `backend/.env` –∏ –æ–±–Ω–æ–≤–∏—Ç–µ:

```env
YCLIENTS_USER_TOKEN=–Ω–æ–≤—ã–π_—Ç–æ–∫–µ–Ω_–∏–∑_—Å–∫—Ä–∏–ø—Ç–∞
```

**–í–∞–∂–Ω–æ:** 
- –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–∞–≤—ã—á–∫–∏ –≤–æ–∫—Ä—É–≥ —Ç–æ–∫–µ–Ω–∞
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–µ—Ç –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤
- –¢–æ–∫–µ–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω

–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

```bash
python scripts/check_yclients_config.py
```

–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
```
‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ! –ù–∞–π–¥–µ–Ω–æ X —É—Å–ª—É–≥
```

## üîÑ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞

–ï—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:

```bash
python scripts/get_yclients_user_token.py
```

–ò–ª–∏ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:

```bash
python scripts/get_yclients_user_token.py –≤–∞—à_–ª–æ–≥–∏–Ω –≤–∞—à_–ø–∞—Ä–æ–ª—å
```

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞

1. **–õ–æ–≥–∏–Ω** - email –∏–ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ YClients
2. **–ü–∞—Ä–æ–ª—å** - –ø–∞—Ä–æ–ª—å –æ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
3. **API Token (Partner Token)** - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–∂–µ –≤ `.env` –∫–∞–∫ `YCLIENTS_API_TOKEN`

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–¢–∏–ø —Ç–æ–∫–µ–Ω–∞:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–ª—É—á–∞–µ—Ç–µ —Ç–æ–∫–µ–Ω —Ç–∏–ø–∞ `employee` –∏–ª–∏ `admin`, –∞ –Ω–µ `partner` –∏–ª–∏ `client`
2. **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, —á–µ–π —Ç–æ–∫–µ–Ω –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ, –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞:
   - –ü—Ä–æ—Å–º–æ—Ç—Ä —É—Å–ª—É–≥
   - –ü—Ä–æ—Å–º–æ—Ç—Ä –º–∞—Å—Ç–µ—Ä–æ–≤
   - –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–ø–∏—Å–µ–π
3. **–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è:** –¢–æ–∫–µ–Ω—ã –º–æ–≥—É—Ç –∏—Å—Ç–µ–∫–∞—Ç—å, –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∏—Ö —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å

## üêõ –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ API Token:**
   ```bash
   # –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ API Token –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
   echo $YCLIENTS_API_TOKEN
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç —Ç–æ–∫–µ–Ω–æ–≤:**
   - API Token –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å Partner Token
   - User Token –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ç–æ–∫–µ–Ω–æ–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞/–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
   - –í–æ–π–¥–∏—Ç–µ –≤ YClients –ø–æ–¥ –∞–∫–∫–∞—É–Ω—Ç–æ–º, —Ç–æ–∫–µ–Ω –∫–æ—Ç–æ—Ä–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ API

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Company ID:**
   ```bash
   # –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Company ID –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
   echo $YCLIENTS_COMPANY_ID
   ```

## üìù –ü—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ .env

```env
YCLIENTS_ENABLED=True
YCLIENTS_COMPANY_ID=235564
YCLIENTS_API_TOKEN=w2n67wn87jecywk2seh4
YCLIENTS_USER_TOKEN=b305a97a405b29e18fdb9e1eca84dc09
```

**–í–∞–∂–Ω–æ:** –ë–µ–∑ –∫–∞–≤—ã—á–µ–∫, –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤ –≤ –Ω–∞—á–∞–ª–µ/–∫–æ–Ω—Ü–µ!

## üîó –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- `scripts/refresh_yclients_token.py` - —Å–∫—Ä–∏–ø—Ç –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞
- `scripts/get_yclients_user_token.py` - —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞
- `scripts/check_yclients_config.py` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

