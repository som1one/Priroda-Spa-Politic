# üì± –ü–æ–ª–Ω—ã–π –≥–∞–π–¥: –ü–æ–¥–ø–∏—Å–∞–Ω–∏–µ iOS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ Codemagic –±–µ–∑ Mac

## üéØ –û–±–∑–æ—Ä

–≠—Ç–æ—Ç –≥–∞–π–¥ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –¥–≤–∞ —Å–ø–æ—Å–æ–±–∞ –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è iOS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ Codemagic –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Mac:

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–¥–ø–∏—Å—å —á–µ—Ä–µ–∑ App Store Connect API** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) - —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–±
2. **–†—É—á–Ω–∞—è –ø–æ–¥–ø–∏—Å—å —á–µ—Ä–µ–∑ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã** - –µ—Å–ª–∏ API –∫–ª—é—á–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã

---

## üìã –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ

- **Bundle ID:** `com.prirodaspa.app`
- **–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:** PRIRODA SPA
- **–§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:** `codemagic.yaml` (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)
- **–†–∞–±–æ—á–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è:** `spa/`

---

## ‚úÖ –°–ø–æ—Å–æ–± 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–¥–ø–∏—Å—å —á–µ—Ä–µ–∑ App Store Connect API (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

–≠—Ç–æ —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –∏ –Ω–∞–¥–µ–∂–Ω—ã–π —Å–ø–æ—Å–æ–±. Codemagic –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç –∏ –æ–±–Ω–æ–≤–∏—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã.

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ API –∫–ª—é—á–∞ –≤ App Store Connect

1. **–í–æ–π–¥–∏—Ç–µ –≤ App Store Connect:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ https://appstoreconnect.apple.com
   - –í–æ–π–¥–∏—Ç–µ —Å –∞–∫–∫–∞—É–Ω—Ç–æ–º –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ Apple Developer

2. **–°–æ–∑–¥–∞–π—Ç–µ API –∫–ª—é—á:**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ: **Users and Access** ‚Üí **Keys** ‚Üí **App Store Connect API**
   - –ù–∞–∂–º–∏—Ç–µ **"+"** (—Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∫–ª—é—á)
   - **–ò–º—è –∫–ª—é—á–∞:** `Codemagic iOS Signing` (–∏–ª–∏ –ª—é–±–æ–µ –¥—Ä—É–≥–æ–µ)
   - **Access:** –≤—ã–±–µ—Ä–∏—Ç–µ **App Manager** –∏–ª–∏ **Admin**
   - –ù–∞–∂–º–∏—Ç–µ **Generate**

3. **–°–∫–∞—á–∞–π—Ç–µ –∫–ª—é—á:**
   - ‚ö†Ô∏è **–í–ê–ñ–ù–û:** –ö–ª—é—á –º–æ–∂–Ω–æ —Å–∫–∞—á–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑!
   - –ù–∞–∂–º–∏—Ç–µ **Download** –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª `.p8` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `AuthKey_XXXXXXXXXX.p8`)
   - –ó–∞–ø–∏—à–∏—Ç–µ **Key ID** (10 —Å–∏–º–≤–æ–ª–æ–≤, –Ω–∞–ø—Ä–∏–º–µ—Ä: `ABC123DEFG`)
   - –ó–∞–ø–∏—à–∏—Ç–µ **Issuer ID** (UUID, –Ω–∞–ø—Ä–∏–º–µ—Ä: `12345678-1234-1234-1234-123456789012`)

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ Codemagic

1. **–í–æ–π–¥–∏—Ç–µ –≤ Codemagic:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ https://codemagic.io
   - –í–æ–π–¥–∏—Ç–µ –≤ —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç

2. **–û—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞:**
   - –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings** ‚Üí **Environment variables**

3. **–°–æ–∑–¥–∞–π—Ç–µ –≥—Ä—É–ø–ø—É –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö:**
   - –ù–∞–∂–º–∏—Ç–µ **"Add group"**
   - –ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã: `app_store_credentials`
   - ‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º –≤ `codemagic.yaml` (—Å—Ç—Ä–æ–∫–∞ 13)

4. **–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ –≥—Ä—É–ø–ø—É:**

   #### –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è 1: `APP_STORE_ISSUER_ID`
   - **Name:** `APP_STORE_ISSUER_ID`
   - **Value:** –í–∞—à Issuer ID (UUID –∏–∑ —à–∞–≥–∞ 1.3)
   - **Secure:** ‚úÖ (–≤–∫–ª—é—á–µ–Ω–æ)
   - **Group:** `app_store_credentials`

   #### –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è 2: `APP_STORE_KEY_ID`
   - **Name:** `APP_STORE_KEY_ID`
   - **Value:** –í–∞—à Key ID (10 —Å–∏–º–≤–æ–ª–æ–≤ –∏–∑ —à–∞–≥–∞ 1.3)
   - **Secure:** ‚úÖ (–≤–∫–ª—é—á–µ–Ω–æ)
   - **Group:** `app_store_credentials`

   #### –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è 3: `APP_STORE_PRIVATE_KEY`
   - **Name:** `APP_STORE_PRIVATE_KEY`
   - **Value:** –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `.p8` (–æ—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤—Å—ë)
     ```
     -----BEGIN PRIVATE KEY-----
     MIGTAgEAMBMGByqGSM49AgEGCCqGSM49AwEHBHkwdwIBAQQg...
     ... (–≤–µ—Å—å —Ç–µ–∫—Å—Ç –∫–ª—é—á–∞) ...
     -----END PRIVATE KEY-----
     ```
   - **Secure:** ‚úÖ (–≤–∫–ª—é—á–µ–Ω–æ)
   - **Group:** `app_store_credentials`
   - ‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –í–∫–ª—é—á–∏—Ç–µ –ø–µ—Ä–µ–Ω–æ—Å—ã —Å—Ç—Ä–æ–∫ (BEGIN/END –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å—Ç—Ä–æ–∫–∞—Ö)

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ codemagic.yaml

–í–∞—à —Ñ–∞–π–ª `codemagic.yaml` —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ:

```1:41:codemagic.yaml
workflows:
  ios-release:
    name: iOS Release Build
    instance_type: mac_mini_m1
    max_build_duration: 120
    working_directory: spa

    environment:
      flutter: stable
      xcode: latest
      cocoapods: default
      groups:
        - app_store_credentials  # –ì—Ä—É–ø–ø–∞ —Å API –∫–ª—é—á–∞–º–∏

    scripts:
      - name: Install deps
        script: flutter pub get

      - name: Install pods
        script: |
          cd ios
          pod install

      - name: Build IPA (App Store automatic signing)
        script: flutter build ipa --release

    artifacts:
      - build/ios/ipa/*.ipa
    
    # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–¥–ø–∏—Å—å —á–µ—Ä–µ–∑ App Store Connect API
    # Codemagic –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ app_store_credentials
    code_signing:
      ios:
        # –ò—Å–ø–æ–ª—å–∑—É–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –ø–æ–¥–ø–∏—Å—å —á–µ—Ä–µ–∑ App Store Connect API
        # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ –≥—Ä—É–ø–ø–µ app_store_credentials:
        # - APP_STORE_ISSUER_ID
        # - APP_STORE_KEY_ID  
        # - APP_STORE_PRIVATE_KEY
        certificate_type: app_store
        bundle_identifier: com.prirodaspa.app
```

‚úÖ **–í—Å—ë –ø—Ä–∞–≤–∏–ª—å–Ω–æ!** –ù–∏—á–µ–≥–æ –º–µ–Ω—è—Ç—å –Ω–µ –Ω—É–∂–Ω–æ.

### –®–∞–≥ 4: –ó–∞–ø—É—Å–∫ —Å–±–æ—Ä–∫–∏

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–±–æ—Ä–∫—É:**
   - –í Codemagic –Ω–∞–∂–º–∏—Ç–µ **"Start new build"**
   - –í—ã–±–µ—Ä–∏—Ç–µ workflow: `ios-release`
   - –í—ã–±–µ—Ä–∏—Ç–µ –≤–µ—Ç–∫—É (–æ–±—ã—á–Ω–æ `main` –∏–ª–∏ `master`)
   - –ù–∞–∂–º–∏—Ç–µ **"Start build"**

2. **Codemagic –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
   - –°–æ–∑–¥–∞—Å—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –ø–æ–¥–ø–∏—Å–∏
   - –°–æ–∑–¥–∞—Å—Ç provisioning profile
   - –ü–æ–¥–ø–∏—à–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
   - –°–æ–±–µ—Ä–µ—Ç IPA —Ñ–∞–π–ª

3. **–†–µ–∑—É–ª—å—Ç–∞—Ç:**
   - IPA —Ñ–∞–π–ª –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –≤ —Ä–∞–∑–¥–µ–ª–µ **Artifacts** –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Å–±–æ—Ä–∫–∏
   - –§–∞–π–ª –≥–æ—Ç–æ–≤ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –≤ App Store Connect

---

## üîß –°–ø–æ—Å–æ–± 2: –†—É—á–Ω–∞—è –ø–æ–¥–ø–∏—Å—å —á–µ—Ä–µ–∑ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã (–µ—Å–ª–∏ API –∫–ª—é—á–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã)

–ï—Å–ª–∏ —É –≤–∞—Å –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ App Store Connect API –∏–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã.

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

–£ –≤–∞—Å —É–∂–µ –µ—Å—Ç—å —Ñ–∞–π–ª—ã:
- `certificate_base64.txt` - —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ base64
- `profile_base64.txt` - provisioning profile –≤ —Ñ–æ—Ä–º–∞—Ç–µ base64

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ Codemagic

1. **–°–æ–∑–¥–∞–π—Ç–µ –≥—Ä—É–ø–ø—É –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö:**
   - –ù–∞–∑–≤–∞–Ω–∏–µ: `ios_credentials` (–∏–ª–∏ –ª—é–±–æ–µ –¥—Ä—É–≥–æ–µ)

2. **–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**

   #### –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è 1: `APPLE_CERTIFICATE_BASE64`
   - **Name:** `APPLE_CERTIFICATE_BASE64`
   - **Value:** –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `certificate_base64.txt` –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤—Å—ë —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
   - **Secure:** ‚úÖ (–≤–∫–ª—é—á–µ–Ω–æ)
   - **Group:** `ios_credentials`
   - ‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ–¥–Ω–æ–π –¥–ª–∏–Ω–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π –±–µ–∑ –ø–µ—Ä–µ–Ω–æ—Å–æ–≤

   #### –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è 2: `APPLE_CERTIFICATE_PASSWORD`
   - **Name:** `APPLE_CERTIFICATE_PASSWORD`
   - **Value:** `prirodaspa2018` (–ø–∞—Ä–æ–ª—å –æ—Ç –≤–∞—à–µ–≥–æ .p12 —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞)
   - **Secure:** ‚úÖ (–≤–∫–ª—é—á–µ–Ω–æ)
   - **Group:** `ios_credentials`
   - ‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –ë–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤, –±–µ–∑ –∫–∞–≤—ã—á–µ–∫

   #### –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è 3: `APPLE_PROVISIONING_PROFILE_BASE64`
   - **Name:** `APPLE_PROVISIONING_PROFILE_BASE64`
   - **Value:** –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `profile_base64.txt` –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤—Å—ë —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
   - **Secure:** ‚úÖ (–≤–∫–ª—é—á–µ–Ω–æ)
   - **Group:** `ios_credentials`
   - ‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ–¥–Ω–æ–π –¥–ª–∏–Ω–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π –±–µ–∑ –ø–µ—Ä–µ–Ω–æ—Å–æ–≤

   #### –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è 4: `KEYCHAIN_PASSWORD` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   - **Name:** `KEYCHAIN_PASSWORD`
   - **Value:** `temp_password` (–ª—é–±–æ–π –ø–∞—Ä–æ–ª—å –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ keychain)
   - **Secure:** ‚úÖ (–≤–∫–ª—é—á–µ–Ω–æ)
   - **Group:** `ios_credentials`

### –®–∞–≥ 3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ codemagic.yaml –¥–ª—è —Ä—É—á–Ω–æ–π –ø–æ–¥–ø–∏—Å–∏

–ó–∞–º–µ–Ω–∏—Ç–µ —Å–µ–∫—Ü–∏—é `code_signing` –≤ `codemagic.yaml`:

```yaml
workflows:
  ios-release:
    name: iOS Release Build
    instance_type: mac_mini_m1
    max_build_duration: 120
    working_directory: spa

    environment:
      flutter: stable
      xcode: latest
      cocoapods: default
      groups:
        - ios_credentials  # –ì—Ä—É–ø–ø–∞ —Å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏

    scripts:
      - name: Install deps
        script: flutter pub get

      - name: Install pods
        script: |
          cd ios
          pod install

      - name: Setup code signing
        script: |
          # –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π keychain
          security create-keychain -p "$KEYCHAIN_PASSWORD" build.keychain
          security default-keychain -s build.keychain
          security unlock-keychain -p "$KEYCHAIN_PASSWORD" build.keychain
          security set-keychain-settings -t 3600 -u build.keychain

          # –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
          echo "$APPLE_CERTIFICATE_BASE64" | base64 --decode > certificate.p12
          security import certificate.p12 -k build.keychain -P "$APPLE_CERTIFICATE_PASSWORD" -T /usr/bin/codesign -T /usr/bin/security
          security set-key-partition-list -S apple-tool:,apple:,codesign: -s -k "$KEYCHAIN_PASSWORD" build.keychain

          # –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º provisioning profile
          echo "$APPLE_PROVISIONING_PROFILE_BASE64" | base64 --decode > profile.mobileprovision
          mkdir -p ~/Library/MobileDevice/Provisioning\ Profiles
          cp profile.mobileprovision ~/Library/MobileDevice/Provisioning\ Profiles/

      - name: Build IPA (manual signing)
        script: |
          flutter build ipa --release \
            --export-options-plist=ios/ExportOptions.plist

    artifacts:
      - build/ios/ipa/*.ipa
    
    code_signing:
      ios:
        certificate_type: distribution
        bundle_identifier: com.prirodaspa.app
```

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ ExportOptions.plist

–í–∞—à —Ñ–∞–π–ª `spa/ios/ExportOptions.plist` —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω:

```1:16:spa/ios/ExportOptions.plist
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>method</key>
    <string>app-store</string>
    <key>uploadBitcode</key>
    <false/>
    <key>uploadSymbols</key>
    <true/>
    <key>compileBitcode</key>
    <false/>
    <key>signingStyle</key>
    <string>automatic</string>
</dict>
</plist>
```

‚ö†Ô∏è **–î–ª—è —Ä—É—á–Ω–æ–π –ø–æ–¥–ø–∏—Å–∏** –∏–∑–º–µ–Ω–∏—Ç–µ `signingStyle` –Ω–∞ `manual`:

```xml
<key>signingStyle</key>
<string>manual</string>
```

–ò –¥–æ–±–∞–≤—å—Ç–µ —Å–µ–∫—Ü–∏—é —Å provisioning profile:

```xml
<key>provisioningProfiles</key>
<dict>
    <key>com.prirodaspa.app</key>
    <string>–ù–∞–∑–≤–∞–Ω–∏–µ –≤–∞—à–µ–≥–æ provisioning profile</string>
</dict>
```

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –æ—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ Codemagic

1. **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ–∑–¥–∞–Ω—ã:**
   - Settings ‚Üí Environment variables
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≥—Ä—É–ø–ø–∞ —Å–æ–∑–¥–∞–Ω–∞ –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ –Ω–µ–π

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö:**
   - –î–æ–ª–∂–Ω—ã —Ç–æ—á–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ –≤ `codemagic.yaml`
   - –†–µ–≥–∏—Å—Ç—Ä –≤–∞–∂–µ–Ω! (`APP_STORE_ISSUER_ID` ‚â† `app_store_issuer_id`)

### –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

#### –û—à–∏–±–∫–∞: "Group not found"
- **–ü—Ä–∏—á–∏–Ω–∞:** –ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã –≤ `codemagic.yaml` –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º –≤ Codemagic
- **–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä–æ–∫—É 13 –≤ `codemagic.yaml` –∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã –≤ Settings

#### –û—à–∏–±–∫–∞: "Variable not found"
- **–ü—Ä–∏—á–∏–Ω–∞:** –ù–∞–∑–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç
- **–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ—á–Ω–æ–µ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ (—Ä–µ–≥–∏—Å—Ç—Ä, –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏—è)

#### –û—à–∏–±–∫–∞: "MAC verification failed" (–¥–ª—è —Ä—É—á–Ω–æ–π –ø–æ–¥–ø–∏—Å–∏)
- **–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å –∏–ª–∏ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–π base64
- **–†–µ—à–µ–Ω–∏–µ:** 
  - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `APPLE_CERTIFICATE_PASSWORD` = `prirodaspa2018` (–±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤)
  - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `APPLE_CERTIFICATE_BASE64` - –æ–¥–Ω–∞ –¥–ª–∏–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞

#### –û—à–∏–±–∫–∞: "No provisioning profile found"
- **–ü—Ä–∏—á–∏–Ω–∞:** Provisioning profile –Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –∏–ª–∏ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç Bundle ID
- **–†–µ—à–µ–Ω–∏–µ:** 
  - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Bundle ID –≤ –ø—Ä–æ—Ñ–∏–ª–µ = `com.prirodaspa.app`
  - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø—Ä–æ—Ñ–∏–ª—å –¥–ª—è App Store Distribution

---

## üìù –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º

### –î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø–æ–¥–ø–∏—Å–∏ (–°–ø–æ—Å–æ–± 1):
- [ ] API –∫–ª—é—á —Å–æ–∑–¥–∞–Ω –≤ App Store Connect
- [ ] –§–∞–π–ª `.p8` —Å–∫–∞—á–∞–Ω –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω
- [ ] Issuer ID –∑–∞–ø–∏—Å–∞–Ω
- [ ] Key ID –∑–∞–ø–∏—Å–∞–Ω
- [ ] –ì—Ä—É–ø–ø–∞ `app_store_credentials` —Å–æ–∑–¥–∞–Ω–∞ –≤ Codemagic
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `APP_STORE_ISSUER_ID` –¥–æ–±–∞–≤–ª–µ–Ω–∞
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `APP_STORE_KEY_ID` –¥–æ–±–∞–≤–ª–µ–Ω–∞
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `APP_STORE_PRIVATE_KEY` –¥–æ–±–∞–≤–ª–µ–Ω–∞ (—Å –ø–µ—Ä–µ–Ω–æ—Å–∞–º–∏ —Å—Ç—Ä–æ–∫)
- [ ] `codemagic.yaml` –ø—Ä–æ–≤–µ—Ä–µ–Ω (–≥—Ä—É–ø–ø–∞ —Å–æ–≤–ø–∞–¥–∞–µ—Ç)

### –î–ª—è —Ä—É—á–Ω–æ–π –ø–æ–¥–ø–∏—Å–∏ (–°–ø–æ—Å–æ–± 2):
- [ ] –§–∞–π–ª `certificate_base64.txt` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –Ω–µ –ø—É—Å—Ç–æ–π
- [ ] –§–∞–π–ª `profile_base64.txt` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –Ω–µ –ø—É—Å—Ç–æ–π
- [ ] –ü–∞—Ä–æ–ª—å –æ—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –∏–∑–≤–µ—Å—Ç–µ–Ω: `prirodaspa2018`
- [ ] –ì—Ä—É–ø–ø–∞ `ios_credentials` —Å–æ–∑–¥–∞–Ω–∞ –≤ Codemagic
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `APPLE_CERTIFICATE_BASE64` –¥–æ–±–∞–≤–ª–µ–Ω–∞
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `APPLE_CERTIFICATE_PASSWORD` = `prirodaspa2018`
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `APPLE_PROVISIONING_PROFILE_BASE64` –¥–æ–±–∞–≤–ª–µ–Ω–∞
- [ ] `codemagic.yaml` –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è —Ä—É—á–Ω–æ–π –ø–æ–¥–ø–∏—Å–∏
- [ ] `ExportOptions.plist` –æ–±–Ω–æ–≤–ª–µ–Ω (`signingStyle: manual`)

---

## üöÄ –ó–∞–ø—É—Å–∫ —Å–±–æ—Ä–∫–∏

1. **–û—Ç–∫—Ä–æ–π—Ç–µ Codemagic:**
   - https://codemagic.io
   - –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–±–æ—Ä–∫—É:**
   - –ù–∞–∂–º–∏—Ç–µ **"Start new build"**
   - –í—ã–±–µ—Ä–∏—Ç–µ workflow: `ios-release`
   - –í—ã–±–µ—Ä–∏—Ç–µ –≤–µ—Ç–∫—É
   - –ù–∞–∂–º–∏—Ç–µ **"Start build"**

3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
   - –°–ª–µ–¥–∏—Ç–µ –∑–∞ –ª–æ–≥–∞–º–∏ —Å–±–æ—Ä–∫–∏
   - –ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–¥–µ–ª "–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –æ—Ç–ª–∞–¥–∫–∞" –≤—ã—à–µ

4. **–†–µ–∑—É–ª—å—Ç–∞—Ç:**
   - –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Å–±–æ—Ä–∫–∏ IPA —Ñ–∞–π–ª –±—É–¥–µ—Ç –≤ —Ä–∞–∑–¥–µ–ª–µ **Artifacts**
   - –°–∫–∞—á–∞–π—Ç–µ —Ñ–∞–π–ª –∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –≤ App Store Connect

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –°—Å—ã–ª–∫–∏ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é:
- **Codemagic iOS –ø–æ–¥–ø–∏—Å—å:** https://docs.codemagic.io/code-signing/ios-code-signing/
- **App Store Connect API:** https://developer.apple.com/documentation/appstoreconnectapi
- **Flutter iOS —Å–±–æ—Ä–∫–∞:** https://docs.flutter.dev/deployment/ios

### –í–∞–∂–Ω—ã–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞:
- `codemagic.yaml` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–±–æ—Ä–∫–∏
- `spa/ios/ExportOptions.plist` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞ IPA
- `spa/ios/Runner/Info.plist` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
- `certificate_base64.txt` - —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (–¥–ª—è —Ä—É—á–Ω–æ–π –ø–æ–¥–ø–∏—Å–∏)
- `profile_base64.txt` - provisioning profile (–¥–ª—è —Ä—É—á–Ω–æ–π –ø–æ–¥–ø–∏—Å–∏)

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –°–ø–æ—Å–æ–± 1 (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–¥–ø–∏—Å—å)** - —ç—Ç–æ –ø—Ä–æ—â–µ –∏ –Ω–∞–¥–µ–∂–Ω–µ–µ
2. **–•—Ä–∞–Ω–∏—Ç–µ API –∫–ª—é—á–∏ –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏** - —Ñ–∞–π–ª `.p8` –º–æ–∂–Ω–æ —Å–∫–∞—á–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑
3. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏ —Å–±–æ—Ä–∫–∏** - Codemagic –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
4. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ TestFlight** - –ø–µ—Ä–µ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π –≤ App Store

---

## ‚ùì –í–æ–ø—Ä–æ—Å—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–¥–µ–ª "–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –æ—Ç–ª–∞–¥–∫–∞"
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–±–æ—Ä–∫–∏ –≤ Codemagic
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é Codemagic: https://docs.codemagic.io

---

## ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ API

–î–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ–∑–¥–∞–Ω Python —Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ Codemagic —á–µ—Ä–µ–∑ –∏—Ö REST API.

### –°–∫—Ä–∏–ø—Ç: `scripts/setup_codemagic_variables.py`

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –≥—Ä—É–ø–ø –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Codemagic.

#### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- Python 3.6+
- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ `requests`: `pip install requests`

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

1. **–ü–æ–ª—É—á–∏—Ç–µ API —Ç–æ–∫–µ–Ω Codemagic:**
   - –í–æ–π–¥–∏—Ç–µ –≤ Codemagic: https://codemagic.io
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ: **Settings** ‚Üí **API tokens**
   - –ù–∞–∂–º–∏—Ç–µ **"Create token"**
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω (–æ–Ω –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑!)

2. **–ü–æ–ª—É—á–∏—Ç–µ Application ID:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç –≤ Codemagic
   - URL –±—É–¥–µ—Ç: `https://codemagic.io/app/{APPLICATION_ID}/...`
   - `APPLICATION_ID` - —ç—Ç–æ —á–∞—Å—Ç—å URL –ø–æ—Å–ª–µ `/app/`

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç:**
   ```bash
   # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
   pip install requests
   
   # –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç
   python scripts/setup_codemagic_variables.py
   ```

4. **–°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º:**
   - –í–≤–µ–¥–∏—Ç–µ API —Ç–æ–∫–µ–Ω (–∏–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `CODEMAGIC_API_TOKEN`)
   - –í–≤–µ–¥–∏—Ç–µ Application ID (–∏–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `CODEMAGIC_APP_ID`)
   - –í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –ø–æ–¥–ø–∏—Å–∏ (1 –∏–ª–∏ 2)
   - –î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø–æ–¥–ø–∏—Å–∏: –≤–≤–µ–¥–∏—Ç–µ Issuer ID, Key ID –∏ –ø—É—Ç—å –∫ .p8 —Ñ–∞–π–ª—É
   - –î–ª—è —Ä—É—á–Ω–æ–π –ø–æ–¥–ø–∏—Å–∏: —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ—á–∏—Ç–∞–µ—Ç `certificate_base64.txt` –∏ `profile_base64.txt`

#### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç:

‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
- –°–æ–∑–¥–∞–µ—Ç –≥—Ä—É–ø–ø—É –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö (–µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
- –ß–∏—Ç–∞–µ—Ç base64 —Ñ–∞–π–ª—ã –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞
- –°–æ–∑–¥–∞–µ—Ç/–æ–±–Ω–æ–≤–ª—è–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –∏—Ö –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

‚úÖ **–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø–æ–¥–ø–∏—Å–∏:**
- –°–æ–∑–¥–∞–µ—Ç –≥—Ä—É–ø–ø—É `app_store_credentials`
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç `APP_STORE_ISSUER_ID`
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç `APP_STORE_KEY_ID`
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç `APP_STORE_PRIVATE_KEY` (—á–∏—Ç–∞–µ—Ç .p8 —Ñ–∞–π–ª)

‚úÖ **–î–ª—è —Ä—É—á–Ω–æ–π –ø–æ–¥–ø–∏—Å–∏:**
- –°–æ–∑–¥–∞–µ—Ç –≥—Ä—É–ø–ø—É `ios_credentials`
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç `APPLE_CERTIFICATE_BASE64` (–∏–∑ `certificate_base64.txt`)
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç `APPLE_CERTIFICATE_PASSWORD`
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç `APPLE_PROVISIONING_PROFILE_BASE64` (–∏–∑ `profile_base64.txt`)
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç `KEYCHAIN_PASSWORD`

#### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
export CODEMAGIC_API_TOKEN="–≤–∞—à_—Ç–æ–∫–µ–Ω"
export CODEMAGIC_APP_ID="–≤–∞—à_app_id"

# –ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞
python scripts/setup_codemagic_variables.py
```

#### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í—ã –º–æ–∂–µ—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º:

**Windows (PowerShell):**
```powershell
$env:CODEMAGIC_API_TOKEN="–≤–∞—à_—Ç–æ–∫–µ–Ω"
$env:CODEMAGIC_APP_ID="–≤–∞—à_app_id"
python scripts/setup_codemagic_variables.py
```

**Windows (CMD):**
```cmd
set CODEMAGIC_API_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω
set CODEMAGIC_APP_ID=–≤–∞—à_app_id
python scripts/setup_codemagic_variables.py
```

**Linux/Mac:**
```bash
export CODEMAGIC_API_TOKEN="–≤–∞—à_—Ç–æ–∫–µ–Ω"
export CODEMAGIC_APP_ID="–≤–∞—à_app_id"
python scripts/setup_codemagic_variables.py
```

#### –ü—Ä–∏–º–µ—á–∞–Ω–∏—è:

‚ö†Ô∏è **–í–∞–∂–Ω–æ:**
- API —Ç–æ–∫–µ–Ω –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ - —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –µ–≥–æ –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º –º–µ—Å—Ç–µ
- –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –µ—Å–ª–∏ –æ–Ω–∏ —É–∂–µ —Å–æ–∑–¥–∞–Ω—ã
- –í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –∫–∞–∫ "secure" (–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ) –≤ Codemagic
- –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –ø–µ—Ä–µ–¥ —á—Ç–µ–Ω–∏–µ–º

üí° **–°–æ–≤–µ—Ç:**
- –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ API —Ç–æ–∫–µ–Ω –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º –º–µ—Å—Ç–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –º–µ–Ω–µ–¥–∂–µ—Ä–µ –ø–∞—Ä–æ–ª–µ–π)
- –í—ã –º–æ–∂–µ—Ç–µ –∑–∞–ø—É—Å–∫–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ - –æ–Ω –±–µ–∑–æ–ø–∞—Å–Ω–æ –æ–±–Ω–æ–≤–∏—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

---

## ‚úÖ –§–∏–Ω–∞–ª—å–Ω—ã–π —á–µ–∫–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —Å–±–æ—Ä–∫–∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å—ë –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ:

### –î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø–æ–¥–ø–∏—Å–∏ (–°–ø–æ—Å–æ–± 1):
- [ ] API –∫–ª—é—á —Å–æ–∑–¥–∞–Ω –≤ App Store Connect
- [ ] –§–∞–π–ª `.p8` —Å–∫–∞—á–∞–Ω –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º –º–µ—Å—Ç–µ
- [ ] Issuer ID –∑–∞–ø–∏—Å–∞–Ω
- [ ] Key ID –∑–∞–ø–∏—Å–∞–Ω
- [ ] –ì—Ä—É–ø–ø–∞ `app_store_credentials` —Å–æ–∑–¥–∞–Ω–∞ –≤ Codemagic
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `APP_STORE_ISSUER_ID` –¥–æ–±–∞–≤–ª–µ–Ω–∞
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `APP_STORE_KEY_ID` –¥–æ–±–∞–≤–ª–µ–Ω–∞
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `APP_STORE_PRIVATE_KEY` –¥–æ–±–∞–≤–ª–µ–Ω–∞ (—Å –ø–µ—Ä–µ–Ω–æ—Å–∞–º–∏ —Å—Ç—Ä–æ–∫)
- [ ] `codemagic.yaml` –ø—Ä–æ–≤–µ—Ä–µ–Ω (–≥—Ä—É–ø–ø–∞ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º –≤ Codemagic)
- [ ] Bundle ID –≤ `codemagic.yaml` = `com.prirodaspa.app`

### –î–ª—è —Ä—É—á–Ω–æ–π –ø–æ–¥–ø–∏—Å–∏ (–°–ø–æ—Å–æ–± 2):
- [ ] –§–∞–π–ª `certificate_base64.txt` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –Ω–µ –ø—É—Å—Ç–æ–π
- [ ] –§–∞–π–ª `profile_base64.txt` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –Ω–µ –ø—É—Å—Ç–æ–π
- [ ] –ü–∞—Ä–æ–ª—å –æ—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –∏–∑–≤–µ—Å—Ç–µ–Ω: `prirodaspa2018`
- [ ] –ì—Ä—É–ø–ø–∞ `ios_credentials` —Å–æ–∑–¥–∞–Ω–∞ –≤ Codemagic
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `APPLE_CERTIFICATE_BASE64` –¥–æ–±–∞–≤–ª–µ–Ω–∞
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `APPLE_CERTIFICATE_PASSWORD` = `prirodaspa2018`
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `APPLE_PROVISIONING_PROFILE_BASE64` –¥–æ–±–∞–≤–ª–µ–Ω–∞
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `KEYCHAIN_PASSWORD` –¥–æ–±–∞–≤–ª–µ–Ω–∞
- [ ] `codemagic.yaml` –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è —Ä—É—á–Ω–æ–π –ø–æ–¥–ø–∏—Å–∏
- [ ] `spa/ios/ExportOptions.plist` –æ–±–Ω–æ–≤–ª–µ–Ω (`signingStyle: manual`)

### –û–±—â–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏:
- [ ] –ü—Ä–æ–µ–∫—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ Codemagic
- [ ] –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω —Å Codemagic
- [ ] Flutter –ø—Ä–æ–µ–∫—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø–∞–ø–∫–µ `spa/`
- [ ] –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã (`flutter pub get` —Ä–∞–±–æ—Ç–∞–µ—Ç)

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ –æ —Å–∫—Ä–∏–ø—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

–°–∫—Ä–∏–ø—Ç `scripts/setup_codemagic_variables.py` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏—è –æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ Codemagic REST API. 

**–ï—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–∫—Ç—É–∞–ª—å–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é Codemagic API: https://docs.codemagic.io/rest-api/overview/
2. –í–æ–∑–º–æ–∂–Ω–æ, endpoints –∏–∑–º–µ–Ω–∏–ª–∏—Å—å - –æ–±–Ω–æ–≤–∏—Ç–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤ —Å–∫—Ä–∏–ø—Ç–µ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–≤–æ–∑–º–æ–∂–Ω–æ, –Ω—É–∂–µ–Ω –¥—Ä—É–≥–æ–π –∑–∞–≥–æ–ª–æ–≤–æ–∫)
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä—É—á–Ω—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Codemagic (–æ–ø–∏—Å–∞–Ω–∞ –≤ –≥–∞–π–¥–µ –≤—ã—à–µ)

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:** –ï—Å–ª–∏ API —Å–∫—Ä–∏–ø—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä—É—á–Ω—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Codemagic (–æ–ø–∏—Å–∞–Ω–∞ –≤ —Ä–∞–∑–¥–µ–ª–∞—Ö "–®–∞–≥ 2" –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–ø–æ—Å–æ–±–∞).

---

**–£–¥–∞—á–∏ —Å –ø–æ–¥–ø–∏—Å–∞–Ω–∏–µ–º! üéâ**

