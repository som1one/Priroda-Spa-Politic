# YClients - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

## üöÄ –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (5 –º–∏–Ω—É—Ç)

### –®–∞–≥ 1: –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω—ã YClients

1. **API Token (Partner Token):**
   - YClients ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ ‚Üí API
   - –ù–∞–π–¥–∏—Ç–µ "Partner Token"
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ

2. **User Token:**
   - YClients ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ ‚Üí API
   - –ù–∞–π–¥–∏—Ç–µ "User Token" –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π
   - –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∞: —á—Ç–µ–Ω–∏–µ/—Å–æ–∑–¥–∞–Ω–∏–µ/–æ—Ç–º–µ–Ω–∞ –∑–∞–ø–∏—Å–µ–π
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ

### –®–∞–≥ 2: –û–±–Ω–æ–≤–∏—Ç–µ `.env`

```env
YCLIENTS_ENABLED=True
YCLIENTS_COMPANY_ID=235564
YCLIENTS_API_TOKEN=–≤–∞—à-partner-token
YCLIENTS_USER_TOKEN=–≤–∞—à-user-token
YCLIENTS_BOOKING_FORM_URL=https://n239661.yclients.com
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

```bash
cd backend
python scripts/check_yclients_config.py
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ YCLIENTS_ENABLED = True
‚úÖ YCLIENTS_COMPANY_ID = 235564
‚úÖ YCLIENTS_API_TOKEN = ...
‚úÖ YCLIENTS_USER_TOKEN = ...
‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ! –ù–∞–π–¥–µ–Ω–æ X —É—Å–ª—É–≥
```

### –®–∞–≥ 4: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–π—Ç–µ –∫–∞—Ç–∞–ª–æ–≥

```bash
python scripts/sync_yclients_catalog.py
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
INFO –£—Å–ª—É–≥–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã: —Å–æ–∑–¥–∞–Ω–æ X, –æ–±–Ω–æ–≤–ª–µ–Ω–æ Y
INFO –ú–∞—Å—Ç–µ—Ä–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã: —Å–æ–∑–¥–∞–Ω–æ X, –æ–±–Ω–æ–≤–ª–µ–Ω–æ Y
```

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –∑–∞–ø–∏—Å–µ–π

```bash
python scripts/check_booking_sync.py
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ –¢–æ–∫–µ–Ω—ã YClients –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –∫–æ–¥–æ–º: X –∏–∑ X
```

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å—Å—è:**
   - –ú–µ–Ω—é ‚Üí "–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –æ–Ω–ª–∞–π–Ω"
   - –û—Ç–∫—Ä–æ–µ—Ç—Å—è —Ñ–æ—Ä–º–∞ YClients —Å –ø—Ä–µ–¥–∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

2. **–ó–∞–ø–∏—Å–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è:**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ webhook (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)
   - –ò–ª–∏ –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

3. **–ë–æ–Ω—É—Å—ã –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è:**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∑–∞–ø–∏—Å–∏

---

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Webhook (–¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏)

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ ngrok:
   ```bash
   ngrok http 9003
   ```

2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ HTTPS URL

3. –í YClients: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ ‚Üí Webhooks
   - URL: `https://–≤–∞—à-ngrok-url.ngrok.io/api/v1/yclients/webhook`
   - –°–æ–±—ã—Ç–∏—è: —Å–æ–∑–¥–∞–Ω–∏–µ, –∏–∑–º–µ–Ω–µ–Ω–∏–µ, –æ—Ç–º–µ–Ω–∞ –∑–∞–ø–∏—Å–∏

---

## üêõ –ü—Ä–æ–±–ª–µ–º—ã?

### `401 Unauthorized`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω—ã –≤ `.env`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–æ–∫–µ–Ω—ã –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤

### `403 Forbidden`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ User Token –≤ YClients
- –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Ç–æ–∫–µ–Ω —Å –ø–æ–ª–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏

### –ó–∞–ø–∏—Å–∏ –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `check_booking_sync.py`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏–º–µ—é—Ç `unique_code`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker compose logs -f backend`

---

## üìö –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–º. `YCLIENTS_COMPLETE_SETUP_GUIDE.md` –¥–ª—è –ø–æ–ª–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏.

