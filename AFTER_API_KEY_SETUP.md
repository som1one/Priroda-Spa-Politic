# üöÄ –ß—Ç–æ –¥–µ–ª–∞—Ç—å –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ API –∫–ª—é—á–∞ –≤ Codemagic

## ‚úÖ –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã

1. –í Codemagic ‚Üí –í–∞—à –ø—Ä–æ–µ–∫—Ç ‚Üí **Settings** (‚öôÔ∏è)
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:
   - ‚úÖ Issuer ID –∑–∞–ø–æ–ª–Ω–µ–Ω
   - ‚úÖ Key ID –∑–∞–ø–æ–ª–Ω–µ–Ω
   - ‚úÖ .p8 —Ñ–∞–π–ª –∑–∞–≥—Ä—É–∂–µ–Ω
3. –ï—Å–ª–∏ –≤—Å—ë –∑–∞–ø–æ–ª–Ω–µ–Ω–æ - –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É

---

## üì± –®–∞–≥ 2: –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø–µ—Ä–≤—É—é —Å–±–æ—Ä–∫—É iOS

### –í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ Workflow Editor

1. –í Codemagic –æ—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Workflows** (–†–∞–±–æ—á–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã)
3. –ù–∞–π–¥–∏—Ç–µ **iOS Workflow** (–∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π)
4. –ù–∞–∂–º–∏—Ç–µ **"Start new build"** (–ù–∞—á–∞—Ç—å –Ω–æ–≤—É—é —Å–±–æ—Ä–∫—É)
5. –í—ã–±–µ—Ä–∏—Ç–µ:
   - **Branch:** `main` (–∏–ª–∏ –≤–∞—à–∞ —Ä–∞–±–æ—á–∞—è –≤–µ—Ç–∫–∞)
   - **Workflow:** iOS Workflow
6. –ù–∞–∂–º–∏—Ç–µ **"Start build"** (–ù–∞—á–∞—Ç—å —Å–±–æ—Ä–∫—É)

### –í–∞—Ä–∏–∞–Ω—Ç B: –ß–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É –Ω–∞ –≥–ª–∞–≤–Ω–æ–π

1. –ù–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞–∂–º–∏—Ç–µ **"Start new build"**
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–µ—Ç–∫—É –∏ workflow
3. –ù–∞–∂–º–∏—Ç–µ **"Start build"**

---

## ‚è±Ô∏è –®–∞–≥ 3: –î–æ–∂–¥–∏—Ç–µ—Å—å —Å–±–æ—Ä–∫–∏

- **–í—Ä–µ–º—è —Å–±–æ—Ä–∫–∏:** 10-20 –º–∏–Ω—É—Ç
- **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
  - Codemagic –∫–ª–æ–Ω–∏—Ä—É–µ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
  - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Flutter
  - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç CocoaPods
  - –°–æ–±–∏—Ä–∞–µ—Ç iOS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
  - –ü–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–∏—Å–ø–æ–ª—å–∑—É—è –≤–∞—à API –∫–ª—é—á)
  - –°–æ–∑–¥–∞–µ—Ç IPA —Ñ–∞–π–ª

**–°–ª–µ–¥–∏—Ç–µ –∑–∞ –ª–æ–≥–∞–º–∏** - —Ç–∞–º –±—É–¥–µ—Ç –≤–∏–¥–Ω–æ –ø—Ä–æ–≥—Ä–µ—Å—Å

---

## üì• –®–∞–≥ 4: –°–∫–∞—á–∞–π—Ç–µ IPA —Ñ–∞–π–ª

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Å–±–æ—Ä–∫–∏:

1. –í Codemagic –æ—Ç–∫—Ä–æ–π—Ç–µ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—É—é —Å–±–æ—Ä–∫—É
2. –ù–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª **"Artifacts"** (–ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã)
3. –°–∫–∞—á–∞–π—Ç–µ —Ñ–∞–π–ª `*.ipa`
4. –≠—Ç–æ –≥–æ—Ç–æ–≤–æ–µ iOS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ!

---

## üß™ –®–∞–≥ 5: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ TestFlight (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. **–°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ App Store Connect:**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [appstoreconnect.apple.com](https://appstoreconnect.apple.com)
   - **My Apps** ‚Üí **"+"** ‚Üí **New App**
   - –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
     - **Name:** Priroda Spa
     - **Primary Language:** Russian
     - **Bundle ID:** `com.prirodaspa.app`
     - **SKU:** `prirodaspa-001`
   - –ù–∞–∂–º–∏—Ç–µ **"Create"**

2. **–ó–∞–≥—Ä—É–∑–∏—Ç–µ IPA –≤ TestFlight:**
   - –í App Store Connect ‚Üí –í–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Üí **TestFlight**
   - –ù–∞–∂–º–∏—Ç–µ **"+"** ‚Üí **Upload Build**
   - –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Å–∫–∞—á–∞–Ω–Ω—ã–π `.ipa` —Ñ–∞–π–ª
   - –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ **Transporter** (–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç Apple)

3. **–î–æ–±–∞–≤—å—Ç–µ —Ç–µ—Å—Ç–µ—Ä–æ–≤:**
   - –ü–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ (10-30 –º–∏–Ω—É—Ç) –¥–æ–±–∞–≤—å—Ç–µ —Ç–µ—Å—Ç–µ—Ä–æ–≤
   - –û–Ω–∏ –ø–æ–ª—É—á–∞—Ç –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –≤ TestFlight

### –í–∞—Ä–∏–∞–Ω—Ç 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞–ø—Ä—è–º—É—é (—Ç—Ä–µ–±—É–µ—Ç Mac)

- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **Xcode** –∏–ª–∏ **Apple Configurator 2**
- –ò–ª–∏ –ø–æ–ø—Ä–æ—Å–∏—Ç–µ –∫–æ–≥–æ-—Ç–æ —Å Mac —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞ –≤–∞—à–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ

---

## üîÑ –®–∞–≥ 6: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –∑–∞–≥—Ä—É–∑–∫—É –≤ TestFlight (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ß—Ç–æ–±—ã –∫–∞–∂–¥—ã–π —Ä–∞–∑ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—Ç—å IPA –≤—Ä—É—á–Ω—É—é:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ Codemagic UI

1. –í Codemagic ‚Üí –í–∞—à –ø—Ä–æ–µ–∫—Ç ‚Üí **Settings**
2. –ù–∞–π–¥–∏—Ç–µ **"Publishing"** (–ü—É–±–ª–∏–∫–∞—Ü–∏—è)
3. –í–∫–ª—é—á–∏—Ç–µ **"App Store Connect"**
4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   - **App Store Connect API key** (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)
   - **App ID:** `com.prirodaspa.app`
   - **Submit to TestFlight:** ‚úÖ –í–∫–ª—é—á–∏—Ç–µ
   - **Beta groups:** Internal Testing (–∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ—é)
5. **Save**

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ codemagic.yaml

–û—Ç–∫—Ä–æ–π—Ç–µ `codemagic.yaml` –∏ —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å–µ–∫—Ü–∏—é:

```yaml
publishing:
  app_store_connect:
    auth:
      issuer_id: $APP_STORE_ISSUER_ID
      key_id: $APP_STORE_KEY_ID
      key: $APP_STORE_PRIVATE_KEY
    submit_to_testflight: true
    beta_groups:
      - Internal Testing
```

**–í–∞–∂–Ω–æ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `APP_STORE_ISSUER_ID`, `APP_STORE_KEY_ID`, `APP_STORE_PRIVATE_KEY` –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ Environment Variables –≥—Ä—É–ø–ø—ã `app_store_credentials`.

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

- [ ] API –∫–ª—é—á —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ Codemagic
- [ ] –ó–∞–ø—É—â–µ–Ω–∞ –ø–µ—Ä–≤–∞—è —Å–±–æ—Ä–∫–∞
- [ ] –°–±–æ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å —É—Å–ø–µ—à–Ω–æ
- [ ] IPA —Ñ–∞–π–ª —Å–∫–∞—á–∞–Ω
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–æ –≤ App Store Connect (–¥–ª—è TestFlight)
- [ ] IPA –∑–∞–≥—Ä—É–∂–µ–Ω –≤ TestFlight (–∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞)

---

## üéØ –ß—Ç–æ –¥–∞–ª—å—à–µ?

### –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
1. ‚úÖ –°–∫–∞—á–∞–π—Ç–µ IPA
2. ‚úÖ –ó–∞–≥—Ä—É–∑–∏—Ç–µ –≤ TestFlight
3. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ

### –î–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤ App Store:
1. ‚úÖ –ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
2. ‚úÖ –î–æ–±–∞–≤—å—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã
3. ‚úÖ –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
4. ‚úÖ –û—Ç–ø—Ä–∞–≤—å—Ç–µ –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é

---

## ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –û—à–∏–±–∫–∞: "Code signing failed"
- **–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ API –∫–ª—é—á –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞–ø–æ–ª–Ω–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Bundle ID `com.prirodaspa.app` –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –≤ Apple Developer Portal

### –û—à–∏–±–∫–∞: "Bundle ID not found"
- **–†–µ—à–µ–Ω–∏–µ:** –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ Bundle ID:
  1. [developer.apple.com/account](https://developer.apple.com/account)
  2. **Certificates, Identifiers & Profiles** ‚Üí **Identifiers**
  3. **"+"** ‚Üí **App IDs** ‚Üí **App**
  4. Bundle ID: `com.prirodaspa.app`

### –û—à–∏–±–∫–∞: "GoogleService-Info.plist not found"
- **–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª –≤ `spa/ios/Runner/GoogleService-Info.plist`
- –°–∫–∞—á–∞–π—Ç–µ –∏–∑ [Firebase Console](https://console.firebase.google.com)

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å:
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω API –∫–ª—é—á –≤ Codemagic
- ‚úÖ –ú–æ–∂–µ—Ç–µ —Å–æ–±–∏—Ä–∞—Ç—å iOS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ –ú–æ–∂–µ—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞—Ç—å –≤ TestFlight

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø–µ—Ä–≤—É—é —Å–±–æ—Ä–∫—É –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç!

