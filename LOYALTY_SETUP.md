# üåü –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏

–ü–æ–ª–Ω—ã–π —á–µ–∫-–ª–∏—Å—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ –≤ production.

---

## 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏

```bash
cd backend
alembic upgrade head
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è:
- –¢–∞–±–ª–∏—Ü—ã `loyalty_levels` (—É—Ä–æ–≤–Ω–∏ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏)
- –¢–∞–±–ª–∏—Ü—ã `loyalty_bonuses` (–±–æ–Ω—É—Å—ã –∏ –ø—Ä–∏–≤–∏–ª–µ–≥–∏–∏)
- –ö–æ–ª–æ–Ω–∫–∏ –≤ `bookings`: `loyalty_points_awarded`, `loyalty_points_amount`
- –ö–æ–ª–æ–Ω–∫–∞ –≤ `users`: `loyalty_level` (–±–∞–ª–ª—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)

### –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Å—Ç–∞—Ä—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

```bash
cd backend
python -m scripts.seed_data
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞—Å—Ç:
- **5 —É—Ä–æ–≤–Ω–µ–π –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏**: –ë—Ä–æ–Ω–∑–æ–≤—ã–π (0), –°–µ—Ä–µ–±—Ä—è–Ω—ã–π (100), –ó–æ–ª–æ—Ç–æ–π (500), –ê–ª–º–∞–∑–Ω—ã–π (1000), –û–±—Å–∏–¥–∏–∞–Ω–æ–≤—ã–π (2000) —Å –∫—Ä–∞—Å–∏–≤—ã–º–∏ –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞–º–∏
- **4 —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –±–æ–Ω—É—Å–∞**: –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –±–æ–Ω—É—Å, —Å–∫–∏–¥–∫–∏, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å
- **3 –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —É—Å–ª—É–≥**: SPA-–ø—Ä–æ–≥—Ä–∞–º–º—ã, –ú–∞—Å—Å–∞–∂, –£—Ö–æ–¥ –∑–∞ –ª–∏—Ü–æ–º
- **5 –ø—Ä–∏–º–µ—Ä–æ–≤ —É—Å–ª—É–≥** (HEAD SPA, –º–∞—Å—Å–∞–∂–∏, —É—Ö–æ–¥—ã –∑–∞ –ª–∏—Ü–æ–º)

---

## 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### –í —Ñ–∞–π–ª–µ `.env` –∏–ª–∏ `.env.local` (–±–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)

```bash
# –ü—Ä–æ–≥—Ä–∞–º–º–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏
LOYALTY_ENABLED=True
LOYALTY_POINTS_PER_100_RUB=5

# 5 –±–∞–ª–ª–æ–≤ = –∫–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç 5 –±–∞–ª–ª–æ–≤ –∑–∞ –∫–∞–∂–¥—ã–µ 100 ‚ÇΩ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —É—Å–ª—É–≥–∏
# –ü—Ä–∏–º–µ—Ä: –∑–∞–ø–∏—Å—å –Ω–∞ —É—Å–ª—É–≥—É 500 ‚ÇΩ ‚Üí –∫–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç 25 –±–∞–ª–ª–æ–≤
```

**–í–∞–∂–Ω–æ:** –ó–Ω–∞—á–µ–Ω–∏–µ `LOYALTY_POINTS_PER_100_RUB` –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω—è—Ç—å —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É –≤ —Ä–∞–∑–¥–µ–ª–µ "–õ–æ—è–ª—å–Ω–æ—Å—Ç—å" ‚Üí "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –±–∞–ª–ª–æ–≤". –≠—Ç–æ –±–æ–ª–µ–µ —É–¥–æ–±–Ω–æ, —á–µ–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ `.env` —Ñ–∞–π–ª–∞.

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å–ø–æ—Å–æ–±)

1. –ó–∞–π–¥–∏—Ç–µ –≤ **–∞–¥–º–∏–Ω–∫—É** ‚Üí —Ä–∞–∑–¥–µ–ª **"–õ–æ—è–ª—å–Ω–æ—Å—Ç—å"**
2. –í –∫–∞—Ä—Ç–æ—á–∫–µ **"–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –±–∞–ª–ª–æ–≤"** –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"–ò–∑–º–µ–Ω–∏—Ç—å"**
3. –£–∫–∞–∂–∏—Ç–µ –Ω—É–∂–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–ª–ª–æ–≤ –∑–∞ 100 ‚ÇΩ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `10` –¥–ª—è 10 –±–∞–ª–ª–æ–≤ –∑–∞ –∫–∞–∂–¥—ã–µ 100 ‚ÇΩ)
4. –ù–∞–∂–º–∏—Ç–µ **"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"**

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è **—Å—Ä–∞–∑—É** –∏ –¥–µ–π—Å—Ç–≤—É—é—Ç **–¥–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞**
- –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –∑–Ω–∞—á–µ–Ω–∏–µ –≤–µ—Ä–Ω—ë—Ç—Å—è –∫ —Ç–æ–º—É, —á—Ç–æ —É–∫–∞–∑–∞–Ω–æ –≤ `.env`
- –ï—Å–ª–∏ –Ω—É–∂–Ω–æ **–ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ** –∏–∑–º–µ–Ω–µ–Ω–∏–µ (–∫–æ—Ç–æ—Ä–æ–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞), –æ–±–Ω–æ–≤–∏—Ç–µ `LOYALTY_POINTS_PER_100_RUB` –≤ —Ñ–∞–π–ª–µ `.env`

**–ü—Ä–∏–º–µ—Ä—ã:**
- `5` = 5 –±–∞–ª–ª–æ–≤ –∑–∞ –∫–∞–∂–¥—ã–µ 100 ‚ÇΩ (–ø—Ä–∏ —É—Å–ª—É–≥–µ 500 ‚ÇΩ ‚Üí 25 –±–∞–ª–ª–æ–≤)
- `10` = 10 –±–∞–ª–ª–æ–≤ –∑–∞ –∫–∞–∂–¥—ã–µ 100 ‚ÇΩ (–ø—Ä–∏ —É—Å–ª—É–≥–µ 500 ‚ÇΩ ‚Üí 50 –±–∞–ª–ª–æ–≤)
- `1` = 1 –±–∞–ª–ª –∑–∞ –∫–∞–∂–¥—ã–µ 100 ‚ÇΩ (–ø—Ä–∏ —É—Å–ª—É–≥–µ 500 ‚ÇΩ ‚Üí 5 –±–∞–ª–ª–æ–≤)

---

## 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å YClients (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ß—Ç–æ–±—ã –±–∞–ª–ª—ã –Ω–∞—á–∏—Å–ª—è–ª–∏—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏ —á–µ—Ä–µ–∑ YClients:

### –í `.env`:

```bash
YCLIENTS_ENABLED=True
YCLIENTS_COMPANY_ID=123456
YCLIENTS_API_TOKEN=–≤–∞—à_api_—Ç–æ–∫–µ–Ω
YCLIENTS_USER_TOKEN=–≤–∞—à_user_—Ç–æ–∫–µ–Ω
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:

1. –ó–∞–ø–∏—Å—å —Å–æ–∑–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ –≤–∏–¥–∂–µ—Ç YClients –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
2. –ü–æ—Å–ª–µ –ø–æ—Å–µ—â–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –≤ YClients –º–µ–Ω—è–µ—Ç —Å—Ç–∞—Ç—É—Å –Ω–∞ **"–ó–∞–≤–µ—Ä—à–µ–Ω–æ"** (COMPLETED)
3. Backend —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –∑–∞–ø–∏—Å—å (–∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç –∏–ª–∏ —á–µ—Ä–µ–∑ webhook)
4. –ë–∞–ª–ª—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è:

```bash
# –í –ª–æ–≥–∞—Ö —Å–µ—Ä–≤–µ—Ä–∞ –±—É–¥–µ—Ç:
INFO | app.services.loyalty_service | –ù–∞—á–∏—Å–ª–µ–Ω—ã –±–∞–ª–ª—ã –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏
  user_id: 42
  booking_id: 123
  points: 25
  total_points: 125
```

---

## 4. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É

### –†–∞–∑–¥–µ–ª "–õ–æ—è–ª—å–Ω–æ—Å—Ç—å" (`/loyalty`)

**–£—Ä–æ–≤–Ω–∏ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏:**
- –°–æ–∑–¥–∞–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Ä–æ–≤–Ω–µ–π (–Ω–∞–∑–≤–∞–Ω–∏–µ, min_points, —Ü–≤–µ—Ç–∞ –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞, –∏–∫–æ–Ω–∫–∞)
- –ü–æ—Ä—è–¥–æ–∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
- –¶–≤–µ—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ –º–æ–±–∏–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–≤

**–ë–æ–Ω—É—Å—ã –∏ –ø—Ä–∏–≤–∏–ª–µ–≥–∏–∏:**
- –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É—Ä–æ–≤–Ω—è
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –±–æ–Ω—É—Å—É
- –û—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ —ç–∫—Ä–∞–Ω–µ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è:**
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–ª–ª–æ–≤ –∑–∞ 100 ‚ÇΩ
- –°—Ç–∞—Ç—É—Å –≤–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏

### –†–∞–∑–¥–µ–ª "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏" (`/users`)

- –ö–æ–ª–æ–Ω–∫–∞ **"–õ–æ—è–ª—å–Ω–æ—Å—Ç—å"** –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–µ –±–∞–ª–ª—ã
- –ö–ª–∏–∫ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é ‚Üí –∫–∞—Ä—Ç–æ—á–∫–∞ —Å –∫–Ω–æ–ø–∫–æ–π **"–°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –±–∞–ª–ª—ã –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏"**
- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å (+N) –∏–ª–∏ —Å–ø–∏—Å–∞—Ç—å (-N) –±–∞–ª–ª—ã –≤—Ä—É—á–Ω—É—é —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –ø—Ä–∏—á–∏–Ω—ã

---

## 5. –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### –ì–¥–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ª–æ—è–ª—å–Ω–æ—Å—Ç—å:

1. **–ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω** (`HomeScreen`):
   - –ö–∞—Ä—Ç–æ—á–∫–∞ "–ü—Ä–æ–≥—Ä–∞–º–º–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏" —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–º –ø–æ —Ç–µ–∫—É—â–µ–º—É —É—Ä–æ–≤–Ω—é
   - –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –ø–æ–ª–Ω—ã–π —ç–∫—Ä–∞–Ω –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏

2. **–ü—Ä–æ—Ñ–∏–ª—å** (`ProfileScreen`):
   - –ö–∞—Ä—Ç–æ—á–∫–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ —Å —É—Ä–æ–≤–Ω–µ–º, –±–∞–ª–ª–∞–º–∏, –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–æ–º –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–≤–Ω—è

3. **–≠–∫—Ä–∞–Ω –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏** (`LoyaltyScreen`):
   - –¢–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–º
   - –ü—Ä–æ–≥—Ä–µ—Å—Å –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–≤–Ω—è
   - –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –±–æ–Ω—É—Å–æ–≤
   - –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∞–ª–ª—ã –ø—Ä–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏"

4. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** (`SettingsScreen`):
   - –í–∏–¥–∂–µ—Ç –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ —Å –ø–æ–¥—Ä–æ–±–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π (–±–∞–ª–ª—ã, —É—Ä–æ–≤–µ–Ω—å, –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ)
   - –ì—Ä–∞–¥–∏–µ–Ω—Ç –º–µ–Ω—è–µ—Ç—Å—è –æ—Ç **–±—Ä–æ–Ω–∑–æ–≤–æ–≥–æ** ‚Üí **—Å–µ—Ä–µ–±—Ä—è–Ω–æ–≥–æ** ‚Üí **–∑–æ–ª–æ—Ç–æ–≥–æ** ‚Üí **–∞–ª–º–∞–∑–Ω–æ–≥–æ** ‚Üí **–æ–±—Å–∏–¥–∏–∞–Ω–æ–≤–æ–≥–æ**

### –¶–≤–µ—Ç–∞ –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–≤

–ì—Ä–∞–¥–∏–µ–Ω—Ç—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ç—è–≥–∏–≤–∞—é—Ç—Å—è –∏–∑ backend (—Ç–∞–±–ª–∏—Ü–∞ `loyalty_levels`):
- **–ë—Ä–æ–Ω–∑–æ–≤—ã–π**: `#CD7F32` ‚Üí `#A0522D`
- **–°–µ—Ä–µ–±—Ä—è–Ω—ã–π**: `#C0C0C0` ‚Üí `#808080`
- **–ó–æ–ª–æ—Ç–æ–π**: `#FFD700` ‚Üí `#DAA520`
- **–ê–ª–º–∞–∑–Ω—ã–π**: `#B9F2FF` ‚Üí `#4A90E2`
- **–û–±—Å–∏–¥–∏–∞–Ω–æ–≤—ã–π**: `#2C2C2C` ‚Üí `#0A0A0A`

–í—ã –º–æ–∂–µ—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ª—é–±—ã–µ —Ü–≤–µ—Ç–∞ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É –≤ —Ä–∞–∑–¥–µ–ª–µ "–õ–æ—è–ª—å–Ω–æ—Å—Ç—å".

---

## 6. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã end-to-end

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –±–∞–ª–ª–æ–≤ –≤—Ä—É—á–Ω—É—é

1. –û—Ç–∫—Ä–æ–π—Ç–µ **–∞–¥–º–∏–Ω–∫—É** ‚Üí **"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏"**
2. –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –ª—é–±–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. –ù–∞–∂–º–∏—Ç–µ **"–°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –±–∞–ª–ª—ã –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏"**
4. –í–≤–µ–¥–∏—Ç–µ `+100` –±–∞–ª–ª–æ–≤, –ø—Ä–∏—á–∏–Ω–∞: "–¢–µ—Å—Ç–æ–≤–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ"
5. –û—Ç–∫—Ä–æ–π—Ç–µ –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Üí –ø—Ä–æ—Ñ–∏–ª—å ‚Üí –¥–æ–ª–∂–µ–Ω –≤—ã—Ä–∞—Å—Ç–∏ —É—Ä–æ–≤–µ–Ω—å –∏ –±–∞–ª–ª—ã

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ (–µ—Å–ª–∏ YClients –≤–∫–ª—é—á—ë–Ω)

1. –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é –∑–∞–ø–∏—Å—å —á–µ—Ä–µ–∑ –≤–∏–¥–∂–µ—Ç YClients –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
2. –í –∞–¥–º–∏–Ω–∫–µ YClients –æ—Ç–º–µ—Ç—å—Ç–µ –∑–∞–ø–∏—Å—å –∫–∞–∫ **"–ó–∞–≤–µ—Ä—à–µ–Ω–æ"**
3. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 30 –º–∏–Ω—É—Ç (–ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è) –∏–ª–∏ –≤—ã–∑–æ–≤–∏—Ç–µ:
   ```bash
   curl -X POST http://localhost:9000/api/v1/yclients/sync-bookings \
     -H "Authorization: Bearer ADMIN_TOKEN"
   ```
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ ‚Äî –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–ø–∏—Å—å:
   ```
   INFO | –ù–∞—á–∏—Å–ª–µ–Ω—ã –±–∞–ª–ª—ã –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ | user_id: X, points: Y
   ```
5. –í –º–æ–±–∏–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –±–∞–ª–ª—ã –¥–æ–ª–∂–Ω—ã –≤—ã—Ä–∞—Å—Ç–∏

---

## 7. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
cd backend
pytest tests/test_loyalty_award.py -v
```

–¢–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ä–∞—Å—á—ë—Ç –±–∞–ª–ª–æ–≤ (5 –±–∞–ª–ª–æ–≤ –∑–∞ 100 ‚ÇΩ)
- –ë–∞–ª–ª—ã –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è COMPLETED –∑–∞–ø–∏—Å–µ–π
- –ë–∞–ª–ª—ã –Ω–µ –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è –¥–≤–∞–∂–¥—ã –Ω–∞ –æ–¥–Ω—É –∑–∞–ø–∏—Å—å
- –ë–∞–ª–ª—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å—É–º–º–∏—Ä—É—é—Ç—Å—è —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

---

## 8. –ß—Ç–æ –¥–∞–ª—å—à–µ?

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:

- **–°–ø–∏—Å–∞–Ω–∏–µ –±–∞–ª–ª–æ–≤**: —Ä–∞–∑—Ä–µ—à–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –ø–ª–∞—Ç–∏—Ç—å –±–∞–ª–ª–∞–º–∏ –∑–∞ —É—Å–ª—É–≥–∏ (—É–∂–µ –µ—Å—Ç—å —Ñ–ª–∞–≥ `auto_apply_loyalty_points` –≤ `users`)
- **–ò—Å—Ç–æ—Ä–∏—è –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π**: —Ç–∞–±–ª–∏—Ü–∞ `loyalty_transactions` –¥–ª—è audit trail
- **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**: push –ø—Ä–∏ –ø–æ–≤—ã—à–µ–Ω–∏–∏ —É—Ä–æ–≤–Ω—è –∏–ª–∏ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–∏ –±–∞–ª–ª–æ–≤
- **–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∞–∫—Ü–∏–∏**: "–¥–≤–æ–π–Ω—ã–µ –±–∞–ª–ª—ã" –≤ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ –¥–Ω–∏
- **–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞**: –±–∞–ª–ª—ã –∑–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –¥—Ä—É–∑–µ–π

---

## –ì–æ—Ç–æ–≤–æ! üéâ

–ü—Ä–æ–≥—Ä–∞–º–º–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ production-—Ä–µ–∂–∏–º–µ:
- ‚úÖ Frontend: –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, –ø—Ä–æ–≥—Ä–µ—Å—Å
- ‚úÖ Backend: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ, audit, API –¥–ª—è –∞–¥–º–∏–Ω–∫–∏
- ‚úÖ Admin: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è–º–∏, –±–æ–Ω—É—Å–∞–º–∏, —Ä—É—á–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ—Ü–µ–Ω—Ç–∞
- ‚úÖ YClients: –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ sync/webhook
- ‚úÖ –¢–µ—Å—Ç—ã: –ø–æ–∫—Ä—ã—Ç–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥–∏–∫–∏ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è

