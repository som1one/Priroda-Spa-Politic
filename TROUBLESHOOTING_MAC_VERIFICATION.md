—è# üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –æ—à–∏–±–∫–∏ "MAC verification failed"

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞:
```
security: SecKeychainItemImport: MAC verification failed during PKCS12 import (wrong password?)
```

---

## ‚úÖ –ß—Ç–æ —É–∂–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ:

1. ‚úÖ **–°–µ–∫—Ä–µ—Ç—ã —Å–æ–∑–¥–∞–Ω—ã** –≤ GitHub (–≤–∏–¥–Ω–æ –Ω–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–µ)
2. ‚úÖ **Workflow –Ω–∞—Å—Ç—Ä–æ–µ–Ω** –ø—Ä–∞–≤–∏–ª—å–Ω–æ
3. ‚úÖ **–§–∞–π–ª—ã base64** —Å–æ–∑–¥–∞–Ω—ã –ª–æ–∫–∞–ª—å–Ω–æ

---

## üîç –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:

### 1. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å –≤ GitHub Secrets**

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–µ–∫—Ä–µ—Ç `APPLE_CERTIFICATE_PASSWORD` –≤ GitHub
2. –ù–∞–∂–º–∏—Ç–µ **—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** (–∫–∞—Ä–∞–Ω–¥–∞—à)
3. **–£–±–µ–¥–∏—Ç–µ—Å—å**, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ **—Ç–æ—á–Ω–æ** `prirodaspa2018`
   - –ë–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤ –≤ –Ω–∞—á–∞–ª–µ/–∫–æ–Ω—Ü–µ
   - –ë–µ–∑ –∫–∞–≤—ã—á–µ–∫
   - –ë–µ–∑ –ø–µ—Ä–µ–Ω–æ—Å–æ–≤ —Å—Ç—Ä–æ–∫

**–ï—Å–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
- –£–¥–∞–ª–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç
- –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Å –∏–º–µ–Ω–µ–º `APPLE_CERTIFICATE_PASSWORD`
- –ó–Ω–∞—á–µ–Ω–∏–µ: `prirodaspa2018` (–±–µ–∑ –∫–∞–≤—ã—á–µ–∫!)

---

### 2. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π base64 –≤ GitHub Secrets**

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–µ–∫—Ä–µ—Ç `APPLE_CERTIFICATE_BASE64` –≤ GitHub
2. –ù–∞–∂–º–∏—Ç–µ **—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** (–∫–∞—Ä–∞–Ω–¥–∞—à)
3. –ó–Ω–∞—á–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å **–æ–¥–Ω–æ–π –¥–ª–∏–Ω–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π** –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤

**–ï—Å–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
- –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `certificate_base64.txt` –≤ –ø—Ä–æ–µ–∫—Ç–µ
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **–≤—Å—ë —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ** (Ctrl+A, Ctrl+C)
- –í—Å—Ç–∞–≤—å—Ç–µ –≤ GitHub Secret (Ctrl+V)
- **–£–±–µ–¥–∏—Ç–µ—Å—å**, —á—Ç–æ —ç—Ç–æ –æ–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞ –±–µ–∑ –ø–µ—Ä–µ–Ω–æ—Å–æ–≤

---

### 3. **–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —Å–æ–∑–¥–∞–Ω —Å –¥—Ä—É–≥–∏–º –ø–∞—Ä–æ–ª–µ–º**

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ Git Bash –≤ –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞
2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ:
   ```bash
   openssl pkcs12 -info -in certificate.p12 -noout
   ```
3. –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å: `prirodaspa2018`
4. –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ "Mac verify error" ‚Üí —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —Å–æ–∑–¥–∞–Ω —Å –¥—Ä—É–≥–∏–º –ø–∞—Ä–æ–ª–µ–º

**–†–µ—à–µ–Ω–∏–µ:**
- –ü–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ `certificate.p12` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ø–∞—Ä–æ–ª–µ–º
- –û–±–Ω–æ–≤–∏—Ç–µ `certificate_base64.txt`
- –û–±–Ω–æ–≤–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç `APPLE_CERTIFICATE_BASE64` –≤ GitHub

---

## üõ†Ô∏è –ü–æ—à–∞–≥–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞—Ä–æ–ª—å –ª–æ–∫–∞–ª—å–Ω–æ

```bash
# –í Git Bash, –≤ –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞
openssl pkcs12 -info -in certificate.p12 -noout
# –í–≤–µ–¥–∏—Ç–µ: prirodaspa2018
```

**–ï—Å–ª–∏ –æ—à–∏–±–∫–∞** ‚Üí —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —Å–æ–∑–¥–∞–Ω —Å –¥—Ä—É–≥–∏–º –ø–∞—Ä–æ–ª–µ–º

**–ï—Å–ª–∏ OK** ‚Üí –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ —à–∞–≥—É 2

---

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ base64 —Ñ–∞–π–ª

```bash
# –í Git Bash, –≤ –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞
cat certificate_base64.txt | wc -c
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ 5000+ —Å–∏–º–≤–æ–ª–æ–≤
```

**–ï—Å–ª–∏ –º–µ–Ω—å—à–µ 1000** ‚Üí —Ñ–∞–π–ª –ø–æ–≤—Ä–µ–∂–¥–µ–Ω, –ø–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ

---

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ GitHub

1. **APPLE_CERTIFICATE_PASSWORD:**
   - –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: `prirodaspa2018`
   - –ë–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤, –±–µ–∑ –∫–∞–≤—ã—á–µ–∫

2. **APPLE_CERTIFICATE_BASE64:**
   - –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –¥–ª–∏–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ (5000+ —Å–∏–º–≤–æ–ª–æ–≤)
   - –ë–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤, –±–µ–∑ –ø–µ—Ä–µ–Ω–æ—Å–æ–≤ —Å—Ç—Ä–æ–∫

---

### –®–∞–≥ 4: –ü–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

#### –î–ª—è –ø–∞—Ä–æ–ª—è:
1. –£–¥–∞–ª–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç `APPLE_CERTIFICATE_PASSWORD`
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π:
   - Name: `APPLE_CERTIFICATE_PASSWORD`
   - Secret: `prirodaspa2018`
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

#### –î–ª—è base64:
1. –û—Ç–∫—Ä–æ–π—Ç–µ `certificate_base64.txt` –≤ –ø—Ä–æ–µ–∫—Ç–µ
2. –í—ã–¥–µ–ª–∏—Ç–µ –≤—Å—ë (Ctrl+A)
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ (Ctrl+C)
4. –£–¥–∞–ª–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç `APPLE_CERTIFICATE_BASE64`
5. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π:
   - Name: `APPLE_CERTIFICATE_BASE64`
   - Secret: –≤—Å—Ç–∞–≤—å—Ç–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ (Ctrl+V)
6. **–£–±–µ–¥–∏—Ç–µ—Å—å**, —á—Ç–æ —ç—Ç–æ –æ–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞
7. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

---

## üîÑ –ï—Å–ª–∏ –≤—Å—ë —Ä–∞–≤–Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ certificate.p12

```bash
# –í Git Bash, –≤ –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞
# 1. –£–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—ã–π
rm certificate.p12

# 2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ø–∞—Ä–æ–ª–µ–º
openssl pkcs12 -export \
  -out certificate.p12 \
  -inkey private_key.pem \
  -in certificate.pem \
  -name "iPhone Distribution" \
  -passout pass:prirodaspa2018

# 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ
openssl pkcs12 -info -in certificate.p12 -noout
# –í–≤–µ–¥–∏—Ç–µ: prirodaspa2018
# –ï—Å–ª–∏ OK ‚Üí –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é base64

# 4. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π base64
[Convert]::ToBase64String([IO.File]::ReadAllBytes("certificate.p12")) | Out-File -Encoding ASCII certificate_base64.txt

# 5. –û–±–Ω–æ–≤–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç –≤ GitHub
```

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Codemagic

–ï—Å–ª–∏ GitHub Actions –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ Codemagic:
- –ü—Ä–æ—â–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–¥–ø–∏—Å—å —á–µ—Ä–µ–∑ App Store Connect API
- –£–∂–µ –µ—Å—Ç—å `codemagic.yaml` –≤ –ø—Ä–æ–µ–∫—Ç–µ

---

## üìã –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º workflow:

- [ ] `APPLE_CERTIFICATE_PASSWORD` = `prirodaspa2018` (—Ç–æ—á–Ω–æ, –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤)
- [ ] `APPLE_CERTIFICATE_BASE64` = –¥–ª–∏–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –∏–∑ `certificate_base64.txt`
- [ ] `APPLE_PROVISIONING_PROFILE_BASE64` = –¥–ª–∏–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –∏–∑ `profile_base64.txt`
- [ ] –õ–æ–∫–∞–ª—å–Ω–æ `certificate.p12` –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å –ø–∞—Ä–æ–ª–µ–º `prirodaspa2018`
- [ ] Base64 —Ñ–∞–π–ª—ã –Ω–µ –ø—É—Å—Ç—ã–µ (5000+ —Å–∏–º–≤–æ–ª–æ–≤)

---

## üí° –°–æ–≤–µ—Ç:

**–°–∞–º—ã–π –Ω–∞–¥–µ–∂–Ω—ã–π —Å–ø–æ—Å–æ–±:**
1. –£–¥–∞–ª–∏—Ç–µ –≤—Å–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ GitHub
2. –ü–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ `certificate.p12` —Å –ø–∞—Ä–æ–ª–µ–º `prirodaspa2018`
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–µ base64 —Ñ–∞–π–ª—ã
4. –°–æ–∑–¥–∞–π—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã –∑–∞–Ω–æ–≤–æ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏

–≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –≤—Å—ë —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ.

